 Ø·Ø¨Ù‚Ø© DTO + Validation

---

# âœ… 1. ØªØ«Ø¨ÙŠØª Zod

Ø£Ø¶Ù Ø§Ù„Ù…ÙƒØªØ¨Ø©:

```bash
npm install zod
```

---

# âœ… 2. Ø¥Ù†Ø´Ø§Ø¡ DTOs Ø¯Ø§Ø®Ù„ Ù…Ø¬Ù„Ø¯ `src/dto`

### ğŸ“Œ `src/dto/TravelSearch.dto.ts`

```ts
import { z } from "zod";

export const TravelSearchSchema = z.object({
  origin: z
    .string()
    .min(2, "Ø±Ù…Ø² Ø§Ù„Ù…Ø·Ø§Ø± origin ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† 2 Ø£Ø­Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„")
    .max(5),
  destination: z
    .string()
    .min(2, "Ø±Ù…Ø² Ø§Ù„Ù…Ø·Ø§Ø± destination ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† 2 Ø£Ø­Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„")
    .max(5),
  date: z
    .string()
    .regex(/^\d{4}-\d{2}-\d{2}$/, "ØµÙŠØºØ© Ø§Ù„ØªØ§Ø±ÙŠØ® ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† YYYY-MM-DD")
});

export type TravelSearchDTO = z.infer<typeof TravelSearchSchema>;
```

---

# âœ… 3. Ø¥Ø¶Ø§ÙØ© Middleware Ø¹Ø§Ù… Ù„Ù„Ù€ Validation

### ğŸ“Œ `src/middleware/validate.ts`

```ts
import { ZodSchema } from "zod";
import { Request, Response, NextFunction } from "express";

export const validate =
  (schema: ZodSchema) =>
  (req: Request, res: Response, next: NextFunction) => {
    const result = schema.safeParse(req.query);

    if (!result.success) {
      return res.status(400).json({
        message: "Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø¯Ø®Ù„Ø©",
        errors: result.error.flatten()
      });
    }

    // Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø£ØµØ¨Ø­Øª Ø§Ù„Ø¢Ù† Ù…ØªØ­Ù‚Ù‚Ø© ÙˆØ¢Ù…Ù†Ø©
    req.query = result.data;
    next();
  };
```

---

# âœ… 4. ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø±Ø§ÙˆØª Ù„Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù€ DTO + Validation

### ğŸ“Œ `src/routes/travelRoutes.ts`

```ts
import { Router, Request, Response } from "express";
import { unifiedSearch } from "../services/unifiedTravelService.js";
import { validate } from "../middleware/validate.js";
import { TravelSearchSchema } from "../dto/TravelSearch.dto.js";

const router = Router();

// GET /api/travel/search?origin=RUH&destination=DXB&date=2025-02-10
router.get(
  "/search",
  validate(TravelSearchSchema),
  async (req: Request, res: Response) => {
    try {
      const { origin, destination, date } = req.query as any;

      const data = await unifiedSearch({
        origin,
        destination,
        date
      });

      res.json(data);
    } catch (err: any) {
      console.error(err);
      res.status(500).json({
        message: "Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¬Ù„Ø¨ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø³ÙØ±",
        error: err.message
      });
    }
  }
);

export default router;
```

---

# âœ… 5. Ø§Ù„Ø¢Ù† Ø£ØµØ¨Ø­ Ù„Ø¯ÙŠÙƒ:

## ğŸ”¥ **Ø·Ø¨Ù‚Ø© DTO ÙƒØ§Ù…Ù„Ø©**
- ØªØ¹Ø±ÙŠÙ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©
- Ø£Ù†ÙˆØ§Ø¹ TypeScript Ø¬Ø§Ù‡Ø²Ø©
- ØªÙˆØ«ÙŠÙ‚ ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù„Ù„Ù…Ø¯Ø®Ù„Ø§Øª

## ğŸ”¥ **Ø·Ø¨Ù‚Ø© Validation Ø§Ø­ØªØ±Ø§ÙÙŠØ©**
- ØªØªØ­Ù‚Ù‚ Ù…Ù†:
  - ØµÙŠØºØ© Ø§Ù„ØªØ§Ø±ÙŠØ®
  - Ø±Ù…ÙˆØ² Ø§Ù„Ù…Ø·Ø§Ø±Ø§Øª
  - Ø§Ù„Ù‚ÙŠÙ… Ø§Ù„ÙØ§Ø±ØºØ©
- ØªØ±Ø¬Ø¹ Ø£Ø®Ø·Ø§Ø¡ ÙˆØ§Ø¶Ø­Ø© Ù„Ù„Ù€ frontend

## ğŸ”¥ **ØªÙƒØ§Ù…Ù„ ÙƒØ§Ù…Ù„ Ù…Ø¹ Unified Travel API**
- ÙƒÙ„ Ø·Ù„Ø¨ ÙŠÙ…Ø± Ø¹Ø¨Ø± DTO â†’ Validation â†’ Service Layer  
- Ù†ÙØ³ Ø£Ø³Ù„ÙˆØ¨ Ø§Ù„Ù€ SaaS Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠ Ø§Ù„Ù„ÙŠ ÙŠÙ†Ø§Ø³Ø¨ mohamie ecosystem

---

# ğŸ Ø¬Ø§Ù‡Ø² Ø£Ø¶ÙŠÙ Ù„Ùƒ:

### âœ” DTOs Ø¥Ø¶Ø§ÙÙŠØ©:
- `/flights`
- `/places`
- `/weather`
- `/cities`

### âœ” Validation Ù„Ù„Ù€ Body Ø¨Ø¯Ù„ Query  
(Ù„Ùˆ ØªØ¨ØºÙ‰ POST Ø¨Ø¯Ù„ GET)

### âœ” Ø·Ø¨Ù‚Ø© **Error Handling Ù…ÙˆØ­Ø¯Ø©**  
Ø¨Ø£Ø³Ù„ÙˆØ¨ Enterprise

### âœ” Ø·Ø¨Ù‚Ø© **Response DTO**  
Ù„Ø¥Ø±Ø¬Ø§Ø¹ Ø¨ÙŠØ§Ù†Ø§Øª Ù…ÙˆØ­Ø¯Ø© Ù„Ù„Ù€ frontend

---