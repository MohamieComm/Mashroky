# ุชูุซูู ุชูุงููุงุช APIs - ูุดุฑูู ููุณูุฑ ูุงูุณูุงุญุฉ

## ๐ ูุนูููุงุช ุงูุชุทุจูู ุงูุฃุณุงุณูุฉ

- **ุงููููุน ุงูุฑุฆูุณู**: https://www.mashrok.online
- **ุงูุชุทุจูู ุงูุฅูุชุงุฌู**: https://mashroky-production.up.railway.app
- **ุงูููุทูุฉ ุงูุฒูููุฉ**: Asia/Riyadh (UTC+3)
- **ุงูุนููุฉ ุงูุฃุณุงุณูุฉ**: SAR (ุงูุฑูุงู ุงูุณุนูุฏู)

---

## โ๏ธ ุชูุงูู AMADEUS API

### ุงููุนูููุงุช ุงูุฃุณุงุณูุฉ
- **ุงููุฒูุฏ**: Amadeus Travel Intelligence
- **ุงูููุงุฑุฏ ุงููุณุชุฎุฏูุฉ**:
  - Flight Offers Search
  - Flight Offers Pricing
  - Flight Order Management

### ุงููุชุบูุฑุงุช ุงููุทููุจุฉ
```env
AMADEUS_CLIENT_ID=your_amadeus_client_id
AMADEUS_CLIENT_SECRET=your_amadeus_client_secret
```

### ุงููููุงุช ุงููุชุนููุฉ
- **ุงูุชูููู**: `flight-backend/src/config/amadeus.config.js`
- **ุงูุฎุฏูุฉ**: `flight-backend/src/services/amadeus.service.js`
- **ุงููุณุงุฑุงุช**: `flight-backend/src/routes/flights.routes.js`

### ุงููุธุงุฆู ุงููุชุงุญุฉ
โ `searchFlights()` - ุงูุจุญุซ ุนู ุงูุฑุญูุงุช
โ `priceFlights()` - ุงูุญุตูู ุนูู ุฃุณุนุงุฑ ุฏูููุฉ
โ `bookFlight()` - ุญุฌุฒ ุงูุฑุญูุฉ

### ุงุณุชุฎุฏุงู ุงูู API
```javascript
// ุงูุจุญุซ ุนู ุฑุญูุงุช
POST /api/flights/search
{
  "origin": "RUH",           // ุงูุฑูุงุถ
  "destination": "JED",      // ุฌุฏุฉ
  "departureDate": "2026-03-01",
  "adults": 1,
  "children": 0,
  "infants": 0
}

// ูุนุงูุฌุฉ ุงูุญุฌุฒ
POST /api/flights/amadeus/book
{
  "flightOffers": [...],
  "travelers": [...]
}
```

---

## ๐ณ ุชูุงูู MOYASAR ููุฏูุน

### ุงููุนูููุงุช ุงูุฃุณุงุณูุฉ
- **ุงููุฒูุฏ**: Moyasar - ุจูุงุจุฉ ุฏูุน ุณุนูุฏูุฉ
- **ุงูุฏุนู**: ุจุทุงูุงุช ุงุฆุชูุงูุ Apple Payุ Samsung Payุ ูุญุงูุธ ุฑูููุฉ
- **ุงูููุทูุฉ**: ุงูุณุนูุฏูุฉ ูุงูุดุฑู ุงูุฃูุณุท

### ุงููุชุบูุฑุงุช ุงููุทููุจุฉ
```env
MOYASAR_SECRET_KEY=sk_test_xxxxx
MOYASAR_PUBLISHABLE_KEY=pk_test_xxxxx
```

### ุงููููุงุช ุงููุชุนููุฉ
- **ุงูุชูููู**: `flight-backend/src/config/env.config.js`
- **ุงูุฎุฏูุฉ**: `flight-backend/src/services/moyasar.service.js`
- **ุงููุณุงุฑุงุช**: `flight-backend/src/routes/payments.routes.js`

### ุงููุธุงุฆู ุงููุชุงุญุฉ
โ `createMoyasarInvoice()` - ุฅูุดุงุก ุฑุงุจุท ุฏูุน (Invoice) ูุชุญููู ุงููุณุชุฎุฏู ูุตูุญุฉ ุงูุฏูุน
โ `createMockMoyasarPayment()` - ุฅูุดุงุก ุนูููุฉ ุฏูุน ุงุฎุชุจุงุฑูุฉ

### ุงุณุชุฎุฏุงู ุงูู API
```javascript
// ุฅูุดุงุก ุฑุงุจุท ุฏูุน (Invoice)
POST /api/payments/create
{
  "amount": 1500,           // ุจุงูุฑูุงู (ุณูุชู ุชุญูููู ุฅูู ูููุงุช)
  "currency": "SAR",
  "description": "ุญุฌุฒ ุฑุญูุฉ ุฅูู ุฏุจู",
  "bookingId": "BK123456",
  "returnUrl": "https://www.mashrok.online"
}

// ุฑุฏ ุงูุงุชุตุงู (Webhook)
POST /api/payments/webhook
{
  "id": "pay_xxxxx",
  "status": "paid",
  "amount": 1500,
  "created_at": "2026-02-05T10:00:00Z"
}
```

---

## ๐บ๏ธ ุฎุทูุท ุงูุทูุฑุงู ูุงููุฌูุงุช ุงููุฏุนููุฉ

### ุงูุฎุทูุท ุงูุฌููุฉ ุงููุชุงุญุฉ
- **ุงูุณุนูุฏูุฉ**: Saudia (SV)
- **ุงูุฅูุงุฑุงุช**: Emirates (EK), Flydubai (FZ)
- **ูุตุฑ**: EgyptAir (MS)
- **ุฃุฎุฑู**: Lufthansa (LH), Turkish Airlines (TK), Qatar Airways (QR)

### ุงููุฌูุงุช ุงูุดููุฑุฉ (ุจุงูููููุฉ ุงูุนุฑุจูุฉ ุงูุณุนูุฏูุฉ)
- **ุงูุฑูุงุถ** (RUH) - ุงูุนุงุตูุฉ
- **ุฌุฏุฉ** (JED) - ุงูุจูุงุจุฉ ุงูุบุฑุจูุฉ
- **ุงูุฏูุงู** (DMM) - ุงูุดุฑููุฉ
- **ุฃุจูุง** (ABV) - ุนุณูุฑ

### ุงููุฌูุงุช ุงูุฏูููุฉ
- **ุฏุจู** (DXB) - ุงูุฅูุงุฑุงุช
- **ุงููุงูุฑุฉ** (CAI) - ูุตุฑ
- **ููุฏู** (LHR) - ุงูููููุฉ ุงููุชุญุฏุฉ
- **ุฅุณุทูุจูู** (IST) - ุชุฑููุง
- **ุจุงูู** (GYD) - ุฃุฐุฑุจูุฌุงู

---

## ๐งช ุงุฎุชุจุงุฑ ุงูุชูุงููุงุช

### ุฎุทูุงุช ุงูุชุญูู

#### 1๏ธโฃ ุงูุชุญูู ูู AMADEUS
```bash
# ุชุดุบูู ุงุฎุชุจุงุฑ ุงูุจุญุซ
curl -X POST http://localhost:4000/api/flights/search \
  -H "Content-Type: application/json" \
  -d '{
    "origin": "RUH",
    "destination": "DXB",
    "departureDate": "2026-03-15",
    "adults": 1
  }'
```

#### 2๏ธโฃ ุงูุชุญูู ูู MOYASAR
```bash
# ุฅูุดุงุก ูุญุงูุงุฉ ุฏูุน
curl -X POST http://localhost:4000/api/payments/create \
  -H "Content-Type: application/json" \
  -d '{
    "amount": 1500,
    "currency": "SAR",
    "description": "Test Payment"
  }'
```

#### 3๏ธโฃ ุฃููุงุฏ ุงูุงุฎุชุจุงุฑ ุงูููุตู ุจูุง
```javascript
// ูู ููู ุงูุงุฎุชุจุงุฑ
describe('AMADEUS Integration', () => {
  it('should search flights successfully', async () => {
    const flights = await searchFlights({
      origin: 'RUH',
      destination: 'DXB',
      departureDate: '2026-03-01',
      adults: 1
    });
    expect(flights.length).toBeGreaterThan(0);
  });
});
```

---

## ๐ ุชุฏูู ุงูุญุฌุฒ ุงููุงูู

```
โโโโโโโโโโโโโโโโโโโ
โ  ุงููุณุชุฎุฏู      โ
โโโโโโโโโโฌโโโโโโโโโ
         โ
         โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ุงูุจุญุซ ุนู ุงูุฑุญูุงุช (AMADEUS)        โ
โ  - ุงูุฃุตูุ ุงููุฌูุฉุ ุงูุชุงุฑูุฎ         โ
โโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
         โ
         โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ุนุฑุถ ุงููุชุงุฆุฌ ูุงูุฃุณุนุงุฑ             โ
โ  - ุงูููุงุฏู ูุงูููุงุตูุงุช             โ
โโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
         โ
         โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ุงุฎุชูุงุฑ ุงูุญุฌุฒ                      โ
โ  - ุฅุฏุฎุงู ุจูุงูุงุช ุงูุฑูุงุจ            โ
โโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
         โ
         โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ุนูููุฉ ุงูุฏูุน (MOYASAR)            โ
โ  - ุงุฎุชูุงุฑ ุทุฑููุฉ ุงูุฏูุน             โ
โ  - ุชุฃููุฏ ุงูุนูููุฉ                  โ
โโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
         โ
         โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ุชุฃููุฏ ุงูุญุฌุฒ                       โ
โ  - ุฑูู ุงููุฑุฌุน (PNR)              โ
โ  - ุจูุงู ุชุฃููุฏ ุจุงูุจุฑูุฏ              โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## โ๏ธ ูุชุทูุจุงุช ุงูุฅุนุฏุงุฏ

### Backend
```bash
cd flight-backend
npm install
# ููุก ูุชุบูุฑุงุช ุงูุจูุฆุฉ ูู .env
npm run dev
```

### Frontend
```bash
cd app
npm install
npm run dev
```

### ุงูุจูุงูุงุช ุงููุทููุจุฉ ูู Supabase
- ุฌุฏูู `airlines` - ุงูุฎุทูุท ุงูุฌููุฉ
- ุฌุฏูู `destinations` - ุงููุฌูุงุช
- ุฌุฏูู `bookings` - ุงูุญุฌูุฒุงุช
- ุฌุฏูู `payments` - ุงูุนูููุงุช ุงููุงููุฉ

---

## ๐ ุฎูุงุฏู ุงูุฅูุชุงุฌ

### Railway.app
- **ุงูุชุทุจูู**: mashroky-production.up.railway.app
- **ุงูุจูุฆุฉ**: Node.js
- **ุงููุชุบูุฑุงุช**: ููุนุฑููุฉ ูู ููุญ ุงูุชุญูู

### ุงููุทุงู
- **ุงูุฑุฆูุณู**: www.mashrok.online
- **ุงูุจุฏูู**: mashrok.online

---

## ๐ ุฏุนู ุงูุชูุงููุงุช

ูู ุญุงูุฉ ูุฌูุฏ ูุดุงูู:
1. ุชุญูู ูู ูุชุบูุฑุงุช ุงูุจูุฆุฉ
2. ุชุญูู ูู ุณุฌูุงุช ุงูุฃุฎุทุงุก ูู Railway
3. ุงุฎุชุจุฑ ุงูู endpoints ุงููุฑุฏูุฉ
4. ุชุญูู ูู ุฑุณุงุฆู ุงูุฎุทุฃ ูู AMADEUS/MOYASAR

---

**ุขุฎุฑ ุชุญุฏูุซ**: 5 ูุจุฑุงูุฑ 2026
**ุงูุฅุตุฏุงุฑ**: 1.0
