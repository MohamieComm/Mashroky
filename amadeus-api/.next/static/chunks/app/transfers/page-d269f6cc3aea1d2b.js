(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[892],{7701:function(e,t,r){Promise.resolve().then(r.bind(r,2401))},2401:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return o}});var a=r(7437),n=r(2265),s=r(7855),l=r(4508);let i={PRIVATE:"خاص",SHARED:"مشترك",TAXI:"تاكسي",HOURLY:"بالساعة",AIRPORT_EXPRESS:"قطار سريع",AIRPORT_BUS:"باص المطار"};function o(){var e,t;let[r,o]=(0,n.useState)("search"),[c,d]=(0,n.useState)(!1),[u,m]=(0,n.useState)(""),[h,x]=(0,n.useState)(""),[f,p]=(0,n.useState)(""),[g,b]=(0,n.useState)(""),[y,v]=(0,n.useState)(""),[N,j]=(0,n.useState)(1),[w,S]=(0,n.useState)(""),[T,k]=(0,n.useState)([]),[C,O]=(0,n.useState)(null),[D,P]=(0,n.useState)(null),[R,A]=(0,n.useState)({firstName:"",lastName:""}),[E,L]=(0,n.useState)(""),[I,U]=(0,n.useState)(""),[q,_]=(0,n.useState)(""),J=async e=>{e.preventDefault(),d(!0),m("");try{let e={startLocationCode:h,startDateTime:new Date(y).toISOString(),passengers:N};f&&(e.endLocationCode=f),g&&(e.endAddressLine=g),w&&(e.transferType=w);let t=await s.kO.search(e);k(t.data||[]),o("results")}catch(e){m(e.message)}finally{d(!1)}},F=async e=>{if(e.preventDefault(),C){d(!0),m("");try{let e=await s.kO.book({offerId:C.id,data:{passengers:[{firstName:R.firstName,lastName:R.lastName,contacts:{phoneNumber:I,email:E}}],flightNumber:q||void 0,payment:{methodOfPayment:"CREDIT_CARD",creditCard:{number:"4111111111111111",holderName:"".concat(R.firstName," ").concat(R.lastName),vendorCode:"VI",expiryDate:"2026-12"}}}});P(e),o("confirmation")}catch(e){m(e.message)}finally{d(!1)}}};return(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-emerald-50 to-white",dir:"rtl",children:[(0,a.jsx)("div",{className:"bg-gradient-to-l from-emerald-900 to-emerald-700 text-white py-12 px-4",children:(0,a.jsxs)("div",{className:"max-w-5xl mx-auto text-center",children:[(0,a.jsx)("h1",{className:"text-4xl font-bold mb-2",children:"\uD83D\uDE97 حجز النقل والتوصيل"}),(0,a.jsx)("p",{className:"text-emerald-200 text-lg",children:"خدمات نقل خاصة ومشتركة من وإلى المطار"})]})}),(0,a.jsxs)("div",{className:"max-w-5xl mx-auto px-4 -mt-8 pb-12",children:[u&&(0,a.jsxs)("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-xl text-red-700 text-center",children:["⚠️ ",u]}),"search"===r&&(0,a.jsxs)("form",{onSubmit:J,className:"bg-white rounded-2xl shadow-xl p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"من (رمز المطار/المحطة)"}),(0,a.jsx)("input",{type:"text",required:!0,maxLength:3,value:h,onChange:e=>x(e.target.value.toUpperCase()),className:"w-full px-4 py-3 border border-gray-300 rounded-lg text-center font-mono text-xl",placeholder:"RUH",dir:"ltr"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"إلى (رمز أو عنوان)"}),(0,a.jsx)("input",{type:"text",value:f||g,onChange:e=>{let t=e.target.value;t.length<=3&&/^[A-Z]*$/i.test(t)?(p(t.toUpperCase()),b("")):(b(t),p(""))},className:"w-full px-4 py-3 border border-gray-300 rounded-lg",placeholder:"JED أو عنوان الفندق"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"تاريخ ووقت الانطلاق"}),(0,a.jsx)("input",{type:"datetime-local",required:!0,value:y,onChange:e=>v(e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"عدد الركاب"}),(0,a.jsx)("select",{value:N,onChange:e=>j(parseInt(e.target.value)),className:"w-full px-4 py-3 border border-gray-300 rounded-lg",children:[1,2,3,4,5,6,7,8].map(e=>(0,a.jsx)("option",{value:e,children:e},e))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"نوع الخدمة"}),(0,a.jsxs)("select",{value:w,onChange:e=>S(e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg",children:[(0,a.jsx)("option",{value:"",children:"الكل"}),Object.entries(i).map(e=>{let[t,r]=e;return(0,a.jsx)("option",{value:t,children:r},t)})]})]})]}),(0,a.jsx)("button",{type:"submit",disabled:c,className:"w-full py-4 bg-gradient-to-l from-emerald-600 to-emerald-700 text-white font-bold rounded-xl disabled:opacity-50 text-lg",children:c?"جاري البحث...":"\uD83D\uDD0D بحث عن خدمات النقل"})]}),"results"===r&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("button",{onClick:()=>o("search"),className:"text-emerald-700 hover:text-emerald-900",children:"→ تعديل البحث"}),(0,a.jsxs)("h2",{className:"text-xl font-bold",children:[T.length," خيار نقل متاح"]}),0===T.length?(0,a.jsx)("div",{className:"text-center py-12 bg-white rounded-xl shadow",children:(0,a.jsx)("p",{className:"text-xl text-gray-600",children:"لم يتم العثور على خدمات نقل"})}):T.map(e=>{var t,r,n,s;return(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6 hover:shadow-lg transition-shadow",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,a.jsx)("span",{className:"px-3 py-1 bg-emerald-100 text-emerald-700 rounded-full text-sm font-medium",children:i[e.transferType]||e.transferType}),(null===(t=e.serviceProvider)||void 0===t?void 0:t.name)&&(0,a.jsx)("span",{className:"text-sm text-gray-500",children:e.serviceProvider.name})]}),e.vehicle&&(0,a.jsxs)("div",{className:"text-sm text-gray-600 mb-1",children:["\uD83D\uDE98 ",e.vehicle.description||e.vehicle.category,(null===(n=e.vehicle.seats)||void 0===n?void 0:null===(r=n[0])||void 0===r?void 0:r.count)&&" — ".concat(e.vehicle.seats[0].count," مقعد")]}),e.duration&&(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:["⏱️ المدة: ",e.duration]}),e.distance&&(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:["\uD83D\uDCCD المسافة: ",e.distance.value," ",e.distance.unit]})]}),(0,a.jsxs)("div",{className:"text-left",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-emerald-700",children:(0,l.T4)(e.quotation.monetaryAmount||(null===(s=e.quotation.totalTransferAmount)||void 0===s?void 0:s.monetaryAmount)||"0",e.quotation.currencyCode||"SAR")}),e.quotation.isEstimated&&(0,a.jsx)("div",{className:"text-xs text-gray-400",children:"سعر تقديري"}),(0,a.jsx)("button",{onClick:()=>{O(e),o("booking")},className:"mt-2 px-6 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700",children:"احجز"})]})]}),e.cancellationRules&&e.cancellationRules.length>0&&(0,a.jsxs)("div",{className:"mt-3 pt-3 border-t text-xs text-gray-400",children:["سياسة الإلغاء: ",e.cancellationRules[0].ruleDescription]})]},e.id)})]}),"booking"===r&&C&&(0,a.jsxs)("form",{onSubmit:F,className:"bg-white rounded-2xl shadow-xl p-6 space-y-6",children:[(0,a.jsx)("button",{type:"button",onClick:()=>o("results"),className:"text-emerald-700",children:"→ رجوع"}),(0,a.jsx)("div",{className:"p-4 bg-emerald-50 rounded-lg",children:(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsxs)("span",{children:[i[C.transferType],": ",null===(e=C.vehicle)||void 0===e?void 0:e.description]}),(0,a.jsx)("span",{className:"font-bold text-emerald-700",children:(0,l.T4)(C.quotation.monetaryAmount||"0",C.quotation.currencyCode||"SAR")})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الاسم الأول"}),(0,a.jsx)("input",{type:"text",required:!0,value:R.firstName,onChange:e=>A(t=>({...t,firstName:e.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"اسم العائلة"}),(0,a.jsx)("input",{type:"text",required:!0,value:R.lastName,onChange:e=>A(t=>({...t,lastName:e.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"البريد الإلكتروني"}),(0,a.jsx)("input",{type:"email",required:!0,value:E,onChange:e=>L(e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg",dir:"ltr"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"رقم الجوال"}),(0,a.jsx)("input",{type:"tel",required:!0,value:I,onChange:e=>U(e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg",dir:"ltr"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"رقم الرحلة (اختياري)"}),(0,a.jsx)("input",{type:"text",value:q,onChange:e=>_(e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg",placeholder:"SV123",dir:"ltr"})]})]}),(0,a.jsx)("button",{type:"submit",disabled:c,className:"w-full py-4 bg-gradient-to-l from-green-600 to-green-700 text-white font-bold rounded-xl disabled:opacity-50 text-lg",children:c?"جاري الحجز...":"✅ تأكيد حجز النقل"})]}),"confirmation"===r&&D&&(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 text-center",children:[(0,a.jsx)("div",{className:"text-6xl mb-4",children:"\uD83C\uDF89"}),(0,a.jsx)("h2",{className:"text-2xl font-bold text-green-700 mb-2",children:"تم حجز النقل بنجاح!"}),(0,a.jsxs)("p",{className:"text-gray-600",children:["رقم الحجز: ",(0,a.jsx)("span",{className:"font-mono font-bold",children:(null===(t=D.data)||void 0===t?void 0:t.id)||"N/A"})]}),(0,a.jsx)("button",{onClick:()=>{o("search"),P(null)},className:"mt-8 px-8 py-3 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700",children:"بحث جديد"})]})]})]})}},7855:function(e,t,r){"use strict";r.d(t,{cl:function(){return s},kO:function(){return i},rT:function(){return l},vt:function(){return c},z4:function(){return o}});let a=r(257).env.NEXT_PUBLIC_APP_URL||"";async function n(e,t){let r=await fetch("".concat(a).concat(e),{...t,headers:{"Content-Type":"application/json",...null==t?void 0:t.headers}});if(!r.ok)throw Error((await r.json().catch(()=>({error:r.statusText}))).error||"API Error: ".concat(r.status));return r.json()}let s={search:e=>n("/api/flights/search",{method:"POST",body:JSON.stringify(e)}),pricing:e=>n("/api/flights/pricing",{method:"POST",body:JSON.stringify(e)}),book:e=>n("/api/flights/book",{method:"POST",body:JSON.stringify(e)}),getOrder:e=>n("/api/flights/orders/".concat(e)),cancelOrder:e=>n("/api/flights/orders/".concat(e),{method:"DELETE"}),status:e=>{let t=new URLSearchParams(e).toString();return n("/api/flights/status?".concat(t))},seatMaps:e=>n("/api/flights/seatmaps",{method:"POST",body:JSON.stringify(e)}),cheapestDates:e=>{let t=new URLSearchParams(e).toString();return n("/api/flights/cheapest-dates?".concat(t))}},l={searchByCity:e=>{let t=new URLSearchParams(e).toString();return n("/api/hotels/search?".concat(t))},searchOffers:e=>n("/api/hotels/offers",{method:"POST",body:JSON.stringify(e)}),autocomplete:e=>n("/api/hotels/autocomplete?keyword=".concat(encodeURIComponent(e))),book:e=>n("/api/hotels/book",{method:"POST",body:JSON.stringify(e)})},i={search:e=>n("/api/transfers/search",{method:"POST",body:JSON.stringify(e)}),book:e=>n("/api/transfers/book",{method:"POST",body:JSON.stringify(e)}),cancel:e=>n("/api/transfers/cancel",{method:"POST",body:JSON.stringify(e)})},o={search:e=>{let t=new URLSearchParams(e).toString();return n("/api/activities/search?".concat(t))},get:e=>n("/api/activities/".concat(e))},c={search:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"AIRPORT,CITY";return n("/api/locations?keyword=".concat(encodeURIComponent(e),"&subType=").concat(t))},airlines:e=>n("/api/airlines".concat(e?"?airlineCodes=".concat(e):""))}},4508:function(e,t,r){"use strict";function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"SAR",r="string"==typeof e?parseFloat(e):e;return new Intl.NumberFormat("ar-SA",{style:"currency",currency:t,minimumFractionDigits:0,maximumFractionDigits:2}).format(r)}function n(e){let t=e.match(/PT(?:(\d+)H)?(?:(\d+)M)?/);if(!t)return e;let r=t[1]?"".concat(t[1],"س"):"",a=t[2]?"".concat(t[2],"د"):"";return"".concat(r," ").concat(a).trim()}function s(e){return new Date(e).toLocaleTimeString("ar-SA",{hour:"2-digit",minute:"2-digit",hour12:!1})}function l(e){return 0===e?"مباشر":1===e?"توقف واحد":2===e?"توقفان":"".concat(e," توقفات")}function i(e,t){return e.length<=t?e:e.substring(0,t)+"..."}r.d(t,{$G:function(){return i},LU:function(){return n},T4:function(){return a},iP:function(){return l},mr:function(){return s}})},257:function(e,t,r){"use strict";var a,n;e.exports=(null==(a=r.g.process)?void 0:a.env)&&"object"==typeof(null==(n=r.g.process)?void 0:n.env)?r.g.process:r(4227)},4227:function(e){!function(){var t={229:function(e){var t,r,a,n=e.exports={};function s(){throw Error("setTimeout has not been defined")}function l(){throw Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===s||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:s}catch(e){t=s}try{r="function"==typeof clearTimeout?clearTimeout:l}catch(e){r=l}}();var o=[],c=!1,d=-1;function u(){c&&a&&(c=!1,a.length?o=a.concat(o):d=-1,o.length&&m())}function m(){if(!c){var e=i(u);c=!0;for(var t=o.length;t;){for(a=o,o=[];++d<t;)a&&a[d].run();d=-1,t=o.length}a=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===l||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function x(){}n.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];o.push(new h(e,t)),1!==o.length||c||i(m)},h.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=x,n.addListener=x,n.once=x,n.off=x,n.removeListener=x,n.removeAllListeners=x,n.emit=x,n.prependListener=x,n.prependOnceListener=x,n.listeners=function(e){return[]},n.binding=function(e){throw Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw Error("process.chdir is not supported")},n.umask=function(){return 0}}},r={};function a(e){var n=r[e];if(void 0!==n)return n.exports;var s=r[e]={exports:{}},l=!0;try{t[e](s,s.exports,a),l=!1}finally{l&&delete r[e]}return s.exports}a.ab="//";var n=a(229);e.exports=n}()}},function(e){e.O(0,[971,117,744],function(){return e(e.s=7701)}),_N_E=e.O()}]);