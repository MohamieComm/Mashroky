(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[18],{7276:function(e,t,r){Promise.resolve().then(r.bind(r,7111))},7111:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return l}});var n=r(7437),i=r(2265),a=r(7855),s=r(4508);function l(){var e,t;let[r,l]=(0,i.useState)("search"),[o,c]=(0,i.useState)(!1),[d,u]=(0,i.useState)(""),[h,m]=(0,i.useState)(""),[p,g]=(0,i.useState)(""),[x,f]=(0,i.useState)(5),[b,y]=(0,i.useState)([]),[v,N]=(0,i.useState)(null),j=async e=>{if(e.preventDefault(),h&&p){c(!0),u("");try{let e=await a.z4.search({latitude:h,longitude:p,radius:String(x)});y(e.data||[]),l("results")}catch(e){u(e.message)}finally{c(!1)}}},w=async e=>{c(!0);try{let t=await a.z4.get(e);N(t.data||null),l("detail")}catch(t){N(b.find(t=>t.id===e)||null),l("detail")}c(!1)};return(0,n.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-purple-50 to-white",dir:"rtl",children:[(0,n.jsx)("div",{className:"bg-gradient-to-l from-purple-900 to-purple-700 text-white py-12 px-4",children:(0,n.jsxs)("div",{className:"max-w-5xl mx-auto text-center",children:[(0,n.jsx)("h1",{className:"text-4xl font-bold mb-2",children:"\uD83C\uDFAF الأنشطة والتجارب"}),(0,n.jsx)("p",{className:"text-purple-200 text-lg",children:"اكتشف أفضل الأنشطة السياحية في وجهتك"})]})}),(0,n.jsxs)("div",{className:"max-w-5xl mx-auto px-4 -mt-8 pb-12",children:[d&&(0,n.jsxs)("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-xl text-red-700 text-center",children:["⚠️ ",d]}),"search"===r&&(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-6",children:[(0,n.jsx)("h3",{className:"text-lg font-bold mb-4",children:"\uD83C\uDFD9️ اختر مدينة"}),(0,n.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[{name:"الرياض",lat:24.7136,lng:46.6753},{name:"جدة",lat:21.5433,lng:39.1728},{name:"دبي",lat:25.2048,lng:55.2708},{name:"أبوظبي",lat:24.4539,lng:54.3773},{name:"الدوحة",lat:25.2854,lng:51.531},{name:"المنامة",lat:26.2285,lng:50.586},{name:"مسقط",lat:23.588,lng:58.3829},{name:"الكويت",lat:29.3759,lng:47.9774}].map(e=>(0,n.jsx)("button",{onClick:()=>{m(String(e.lat)),g(String(e.lng))},className:"p-3 rounded-lg border-2 text-center transition-all ".concat(h===String(e.lat)?"border-purple-500 bg-purple-50 text-purple-700":"border-gray-200 hover:border-purple-300"),children:e.name},e.name))})]}),(0,n.jsxs)("form",{onSubmit:j,className:"bg-white rounded-2xl shadow-xl p-6 space-y-4",children:[(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"خط العرض"}),(0,n.jsx)("input",{type:"number",step:"any",required:!0,value:h,onChange:e=>m(e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg",dir:"ltr"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"خط الطول"}),(0,n.jsx)("input",{type:"number",step:"any",required:!0,value:p,onChange:e=>g(e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg",dir:"ltr"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"نطاق البحث (كم)"}),(0,n.jsx)("select",{value:x,onChange:e=>f(parseInt(e.target.value)),className:"w-full px-4 py-3 border border-gray-300 rounded-lg",children:[1,2,5,10,20,50].map(e=>(0,n.jsxs)("option",{value:e,children:[e," كم"]},e))})]})]}),(0,n.jsx)("button",{type:"submit",disabled:o,className:"w-full py-4 bg-gradient-to-l from-purple-600 to-purple-700 text-white font-bold rounded-xl disabled:opacity-50 text-lg",children:o?"جاري البحث...":"\uD83D\uDD0D بحث عن أنشطة"})]})]}),"results"===r&&(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)("button",{onClick:()=>l("search"),className:"text-purple-700 hover:text-purple-900",children:"→ تعديل البحث"}),(0,n.jsxs)("h2",{className:"text-xl font-bold",children:[b.length," نشاط متاح"]}),0===b.length?(0,n.jsx)("div",{className:"text-center py-12 bg-white rounded-xl shadow",children:(0,n.jsx)("p",{className:"text-xl text-gray-600",children:"لم يتم العثور على أنشطة"})}):(0,n.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:b.map(e=>{var t,r;return(0,n.jsxs)("div",{className:"bg-white rounded-xl shadow-md overflow-hidden hover:shadow-lg transition-shadow",children:[(null===(t=e.pictures)||void 0===t?void 0:t[0])&&(0,n.jsx)("div",{className:"h-48 bg-gray-200 overflow-hidden",children:(0,n.jsx)("img",{src:e.pictures[0],alt:e.name,className:"w-full h-full object-cover",onError:e=>{e.target.style.display="none"}})}),(0,n.jsxs)("div",{className:"p-4",children:[(0,n.jsx)("h3",{className:"font-bold text-lg mb-1",children:e.name}),e.shortDescription&&(0,n.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:(0,s.$G)(e.shortDescription,100)}),e.rating&&(0,n.jsxs)("div",{className:"text-sm text-yellow-600 mb-2",children:["⭐ ",e.rating]}),(0,n.jsxs)("div",{className:"flex items-center justify-between mt-3",children:[(null===(r=e.price)||void 0===r?void 0:r.amount)&&(0,n.jsx)("span",{className:"text-lg font-bold text-purple-700",children:(0,s.T4)(e.price.amount,e.price.currencyCode||"SAR")}),(0,n.jsx)("button",{onClick:()=>w(e.id),className:"px-4 py-2 bg-purple-600 text-white text-sm rounded-lg hover:bg-purple-700",children:"التفاصيل"})]})]})]},e.id)})})]}),"detail"===r&&v&&(0,n.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl overflow-hidden",children:[(0,n.jsx)("button",{onClick:()=>l("results"),className:"p-4 text-purple-700 hover:text-purple-900",children:"→ رجوع"}),(null===(e=v.pictures)||void 0===e?void 0:e[0])&&(0,n.jsx)("div",{className:"h-64 bg-gray-200",children:(0,n.jsx)("img",{src:v.pictures[0],alt:v.name,className:"w-full h-full object-cover"})}),(0,n.jsxs)("div",{className:"p-6",children:[(0,n.jsx)("h2",{className:"text-2xl font-bold mb-4",children:v.name}),v.rating&&(0,n.jsxs)("div",{className:"text-lg text-yellow-600 mb-3",children:["⭐ ",v.rating]}),v.description&&(0,n.jsx)("p",{className:"text-gray-700 mb-4 leading-relaxed",children:v.description}),v.minimumDuration&&(0,n.jsxs)("p",{className:"text-sm text-gray-500 mb-2",children:["⏱️ المدة: ",v.minimumDuration]}),(null===(t=v.price)||void 0===t?void 0:t.amount)&&(0,n.jsx)("div",{className:"text-2xl font-bold text-purple-700 mb-4",children:(0,s.T4)(v.price.amount,v.price.currencyCode||"SAR")}),v.bookingLink&&(0,n.jsx)("a",{href:v.bookingLink,target:"_blank",rel:"noopener noreferrer",className:"inline-block px-8 py-3 bg-purple-600 text-white font-bold rounded-lg hover:bg-purple-700",children:"احجز الآن ←"})]})]})]})]})}},7855:function(e,t,r){"use strict";r.d(t,{cl:function(){return a},kO:function(){return l},rT:function(){return s},vt:function(){return c},z4:function(){return o}});let n=r(257).env.NEXT_PUBLIC_APP_URL||"";async function i(e,t){let r=await fetch("".concat(n).concat(e),{...t,headers:{"Content-Type":"application/json",...null==t?void 0:t.headers}});if(!r.ok)throw Error((await r.json().catch(()=>({error:r.statusText}))).error||"API Error: ".concat(r.status));return r.json()}let a={search:e=>i("/api/flights/search",{method:"POST",body:JSON.stringify(e)}),pricing:e=>i("/api/flights/pricing",{method:"POST",body:JSON.stringify(e)}),book:e=>i("/api/flights/book",{method:"POST",body:JSON.stringify(e)}),getOrder:e=>i("/api/flights/orders/".concat(e)),cancelOrder:e=>i("/api/flights/orders/".concat(e),{method:"DELETE"}),status:e=>{let t=new URLSearchParams(e).toString();return i("/api/flights/status?".concat(t))},seatMaps:e=>i("/api/flights/seatmaps",{method:"POST",body:JSON.stringify(e)}),cheapestDates:e=>{let t=new URLSearchParams(e).toString();return i("/api/flights/cheapest-dates?".concat(t))}},s={searchByCity:e=>{let t=new URLSearchParams(e).toString();return i("/api/hotels/search?".concat(t))},searchOffers:e=>i("/api/hotels/offers",{method:"POST",body:JSON.stringify(e)}),autocomplete:e=>i("/api/hotels/autocomplete?keyword=".concat(encodeURIComponent(e))),book:e=>i("/api/hotels/book",{method:"POST",body:JSON.stringify(e)})},l={search:e=>i("/api/transfers/search",{method:"POST",body:JSON.stringify(e)}),book:e=>i("/api/transfers/book",{method:"POST",body:JSON.stringify(e)}),cancel:e=>i("/api/transfers/cancel",{method:"POST",body:JSON.stringify(e)})},o={search:e=>{let t=new URLSearchParams(e).toString();return i("/api/activities/search?".concat(t))},get:e=>i("/api/activities/".concat(e))},c={search:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"AIRPORT,CITY";return i("/api/locations?keyword=".concat(encodeURIComponent(e),"&subType=").concat(t))},airlines:e=>i("/api/airlines".concat(e?"?airlineCodes=".concat(e):""))}},4508:function(e,t,r){"use strict";function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"SAR",r="string"==typeof e?parseFloat(e):e;return new Intl.NumberFormat("ar-SA",{style:"currency",currency:t,minimumFractionDigits:0,maximumFractionDigits:2}).format(r)}function i(e){let t=e.match(/PT(?:(\d+)H)?(?:(\d+)M)?/);if(!t)return e;let r=t[1]?"".concat(t[1],"س"):"",n=t[2]?"".concat(t[2],"د"):"";return"".concat(r," ").concat(n).trim()}function a(e){return new Date(e).toLocaleTimeString("ar-SA",{hour:"2-digit",minute:"2-digit",hour12:!1})}function s(e){return 0===e?"مباشر":1===e?"توقف واحد":2===e?"توقفان":"".concat(e," توقفات")}function l(e,t){return e.length<=t?e:e.substring(0,t)+"..."}r.d(t,{$G:function(){return l},LU:function(){return i},T4:function(){return n},iP:function(){return s},mr:function(){return a}})},257:function(e,t,r){"use strict";var n,i;e.exports=(null==(n=r.g.process)?void 0:n.env)&&"object"==typeof(null==(i=r.g.process)?void 0:i.env)?r.g.process:r(4227)},4227:function(e){!function(){var t={229:function(e){var t,r,n,i=e.exports={};function a(){throw Error("setTimeout has not been defined")}function s(){throw Error("clearTimeout has not been defined")}function l(e){if(t===setTimeout)return setTimeout(e,0);if((t===a||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:a}catch(e){t=a}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var o=[],c=!1,d=-1;function u(){c&&n&&(c=!1,n.length?o=n.concat(o):d=-1,o.length&&h())}function h(){if(!c){var e=l(u);c=!0;for(var t=o.length;t;){for(n=o,o=[];++d<t;)n&&n[d].run();d=-1,t=o.length}n=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function p(){}i.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];o.push(new m(e,t)),1!==o.length||c||l(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=p,i.addListener=p,i.once=p,i.off=p,i.removeListener=p,i.removeAllListeners=p,i.emit=p,i.prependListener=p,i.prependOnceListener=p,i.listeners=function(e){return[]},i.binding=function(e){throw Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw Error("process.chdir is not supported")},i.umask=function(){return 0}}},r={};function n(e){var i=r[e];if(void 0!==i)return i.exports;var a=r[e]={exports:{}},s=!0;try{t[e](a,a.exports,n),s=!1}finally{s&&delete r[e]}return a.exports}n.ab="//";var i=n(229);e.exports=i}()}},function(e){e.O(0,[971,117,744],function(){return e(e.s=7276)}),_N_E=e.O()}]);