(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[176],{4107:function(e,t,r){Promise.resolve().then(r.bind(r,1900))},1900:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return u}});var s=r(7437),n=r(2265),a=r(7855);function l(e){let{label:t,placeholder:r,value:l,onChange:i}=e,[o,c]=(0,n.useState)(""),[d,u]=(0,n.useState)([]),[m,x]=(0,n.useState)(!1),[h,g]=(0,n.useState)(!1),[f,p]=(0,n.useState)(l),b=(0,n.useRef)(null);return(0,n.useEffect)(()=>{if(o.length<2){u([]);return}let e=setTimeout(async()=>{g(!0);try{let e=await a.vt.search(o,"AIRPORT,CITY");u(e.data||[]),x(!0)}catch(e){u([])}finally{g(!1)}},300);return()=>clearTimeout(e)},[o]),(0,n.useEffect)(()=>{let e=e=>{b.current&&!b.current.contains(e.target)&&x(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,s.jsxs)("div",{ref:b,className:"relative",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t}),(0,s.jsx)("input",{type:"text",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-right",placeholder:r,value:f||o,onChange:e=>{c(e.target.value),p("")},onFocus:()=>o.length>=2&&x(!0)}),h&&(0,s.jsx)("div",{className:"absolute left-3 top-10",children:(0,s.jsx)("div",{className:"animate-spin h-4 w-4 border-2 border-blue-500 rounded-full border-t-transparent"})}),m&&d.length>0&&(0,s.jsx)("ul",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-auto",children:d.map(e=>{var t,r;return(0,s.jsxs)("li",{className:"px-4 py-3 hover:bg-blue-50 cursor-pointer border-b last:border-b-0 text-right",onClick:()=>{let t=e.iataCode||"",r="".concat(e.name," (").concat(t,")");i(t,r),p(r),c(""),x(!1)},children:[(0,s.jsx)("div",{className:"font-medium",children:e.name}),(0,s.jsxs)("div",{className:"text-sm text-gray-500",children:[e.iataCode," — ",(null===(t=e.address)||void 0===t?void 0:t.cityName)||""," ",(null===(r=e.address)||void 0===r?void 0:r.countryCode)||""]})]},e.id||e.iataCode)})})]})}function i(e){let{onSearch:t,loading:r}=e,[a,i]=(0,n.useState)("roundtrip"),[o,c]=(0,n.useState)(""),[d,u]=(0,n.useState)(""),[m,x]=(0,n.useState)(""),[h,g]=(0,n.useState)(""),[f,p]=(0,n.useState)(1),[b,v]=(0,n.useState)(0),[y,j]=(0,n.useState)(0),[N,w]=(0,n.useState)("ECONOMY"),[S,C]=(0,n.useState)(!1);return(0,s.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),!o||!d||!m)return;let r={originLocationCode:o,destinationLocationCode:d,departureDate:m,adults:f,travelClass:N,nonStop:S,currencyCode:"SAR",max:50};b>0&&(r.children=b),y>0&&(r.infants=y),"roundtrip"===a&&h&&(r.returnDate=h),t(r)},className:"bg-white rounded-2xl shadow-xl p-6 space-y-6",dir:"rtl",children:[(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,s.jsx)("input",{type:"radio",checked:"roundtrip"===a,onChange:()=>i("roundtrip"),className:"text-blue-600"}),(0,s.jsx)("span",{children:"ذهاب وعودة"})]}),(0,s.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,s.jsx)("input",{type:"radio",checked:"oneway"===a,onChange:()=>i("oneway"),className:"text-blue-600"}),(0,s.jsx)("span",{children:"ذهاب فقط"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsx)(l,{label:"من",placeholder:"مطار المغادرة",value:o,onChange:e=>c(e)}),(0,s.jsx)(l,{label:"إلى",placeholder:"مطار الوصول",value:d,onChange:e=>u(e)})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"تاريخ المغادرة"}),(0,s.jsx)("input",{type:"date",required:!0,value:m,onChange:e=>x(e.target.value),min:new Date().toISOString().split("T")[0],className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),"roundtrip"===a&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"تاريخ العودة"}),(0,s.jsx)("input",{type:"date",value:h,onChange:e=>g(e.target.value),min:m||new Date().toISOString().split("T")[0],className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"بالغين"}),(0,s.jsx)("select",{value:f,onChange:e=>p(parseInt(e.target.value)),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[1,2,3,4,5,6,7,8,9].map(e=>(0,s.jsx)("option",{value:e,children:e},e))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"أطفال"}),(0,s.jsx)("select",{value:b,onChange:e=>v(parseInt(e.target.value)),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[0,1,2,3,4,5].map(e=>(0,s.jsx)("option",{value:e,children:e},e))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"رضع"}),(0,s.jsx)("select",{value:y,onChange:e=>j(parseInt(e.target.value)),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[0,1,2].map(e=>(0,s.jsx)("option",{value:e,children:e},e))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الدرجة"}),(0,s.jsxs)("select",{value:N,onChange:e=>w(e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,s.jsx)("option",{value:"ECONOMY",children:"اقتصادية"}),(0,s.jsx)("option",{value:"PREMIUM_ECONOMY",children:"اقتصادية مميزة"}),(0,s.jsx)("option",{value:"BUSINESS",children:"رجال الأعمال"}),(0,s.jsx)("option",{value:"FIRST",children:"الدرجة الأولى"})]})]})]}),(0,s.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,s.jsx)("input",{type:"checkbox",checked:S,onChange:e=>C(e.target.checked),className:"rounded text-blue-600"}),(0,s.jsx)("span",{className:"text-sm",children:"رحلات مباشرة فقط"})]}),(0,s.jsx)("button",{type:"submit",disabled:r||!o||!d||!m,className:"w-full py-4 bg-gradient-to-l from-blue-600 to-blue-700 text-white font-bold rounded-xl hover:from-blue-700 hover:to-blue-800 disabled:opacity-50 disabled:cursor-not-allowed transition-all text-lg",children:r?(0,s.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[(0,s.jsx)("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent"}),"جاري البحث..."]}):"\uD83D\uDD0D بحث عن رحلات"})]})}var o=r(4508);function c(e){let{offers:t,onSelect:r,dictionaries:n}=e;if(0===t.length)return(0,s.jsxs)("div",{className:"text-center py-12 bg-white rounded-xl shadow",children:[(0,s.jsx)("div",{className:"text-6xl mb-4",children:"✈️"}),(0,s.jsx)("p",{className:"text-xl text-gray-600",children:"لم يتم العثور على رحلات"}),(0,s.jsx)("p",{className:"text-gray-400 mt-2",children:"جرب تغيير معايير البحث"})]});let a=e=>{var t;return(null==n?void 0:null===(t=n.carriers)||void 0===t?void 0:t[e])||e};return(0,s.jsxs)("div",{className:"space-y-4",dir:"rtl",children:[(0,s.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,s.jsxs)("h2",{className:"text-xl font-bold text-gray-800",children:[t.length," رحلة متاحة"]})}),t.map(e=>(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-md hover:shadow-lg transition-shadow border border-gray-100 overflow-hidden",children:[e.itineraries.map((e,t)=>{let r=e.segments[0],n=e.segments[e.segments.length-1],l=e.segments.length-1;return(0,s.jsxs)("div",{className:"p-4 border-b last:border-b-0",children:[1===t&&(0,s.jsx)("div",{className:"text-xs text-blue-600 font-medium mb-2",children:"\uD83D\uDD04 رحلة العودة"}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 min-w-[120px]",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center text-sm font-bold text-blue-700",children:r.carrierCode}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-medium text-sm",children:a(r.carrierCode)}),(0,s.jsxs)("div",{className:"text-xs text-gray-400",children:[r.carrierCode,r.number]})]})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-2xl font-bold",children:(0,o.mr)(r.departure.at)}),(0,s.jsx)("div",{className:"text-sm text-gray-500",children:r.departure.iataCode})]}),(0,s.jsxs)("div",{className:"text-center flex-1 px-4",children:[(0,s.jsx)("div",{className:"text-xs text-gray-400",children:e.duration&&(0,o.LU)(e.duration)}),(0,s.jsxs)("div",{className:"relative my-2",children:[(0,s.jsx)("div",{className:"h-px bg-gray-300 w-full"}),l>0&&(0,s.jsx)("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-white px-2",children:(0,s.jsx)("div",{className:"w-2 h-2 bg-orange-400 rounded-full"})})]}),(0,s.jsx)("div",{className:"text-xs font-medium ".concat(0===l?"text-green-600":"text-orange-500"),children:(0,o.iP)(l)})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-2xl font-bold",children:(0,o.mr)(n.arrival.at)}),(0,s.jsx)("div",{className:"text-sm text-gray-500",children:n.arrival.iataCode})]})]})]},t)}),(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gradient-to-l from-blue-50 to-white",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-blue-700",children:(0,o.T4)(e.price.grandTotal||e.price.total,e.price.currency)}),(0,s.jsx)("div",{className:"text-xs text-gray-400",children:"للشخص الواحد"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[e.numberOfBookableSeats&&e.numberOfBookableSeats<=5&&(0,s.jsxs)("span",{className:"text-xs bg-red-100 text-red-600 px-2 py-1 rounded-full",children:["باقي ",e.numberOfBookableSeats," مقاعد"]}),(0,s.jsx)("button",{onClick:()=>r(e),className:"px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors",children:"اختيار ←"})]})]})]},e.id))]})}function d(e){var t;let{offer:r,onBook:a,onBack:l,loading:i}=e,c=(null===(t=r.travelerPricings)||void 0===t?void 0:t.length)||1,[d,u]=(0,n.useState)(Array.from({length:c},(e,t)=>({id:String(t+1),name:{firstName:"",lastName:""},dateOfBirth:"",gender:"MALE",contact:{emailAddress:"",phones:[{deviceType:"MOBILE",countryCallingCode:"966",number:""}]},documents:[{documentType:"PASSPORT",number:"",expiryDate:"",issuanceCountry:"SA",nationality:"SA",holder:!0}]}))),m=(e,t,r)=>{u(s=>{let n=[...s],a=t.split("."),l=n[e];for(let e=0;e<a.length-1;e++)l=l[a[e]];return l[a[a.length-1]]=r,[...n]})};return(0,s.jsxs)("div",{className:"space-y-6",dir:"rtl",children:[(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("button",{onClick:l,className:"text-blue-600 hover:text-blue-800 flex items-center gap-1",children:"→ رجوع للنتائج"}),(0,s.jsx)("h2",{className:"text-xl font-bold",children:"ملخص الرحلة"})]}),r.itineraries.map((e,t)=>{let r=e.segments[0],n=e.segments[e.segments.length-1];return(0,s.jsxs)("div",{className:"flex items-center justify-between py-3 border-b last:border-b-0",children:[(0,s.jsx)("span",{className:"text-sm text-gray-500",children:0===t?"ذهاب":"عودة"}),(0,s.jsxs)("span",{className:"font-medium",children:[r.departure.iataCode," → ",n.arrival.iataCode]}),(0,s.jsx)("span",{children:(0,o.mr)(r.departure.at)}),(0,s.jsx)("span",{className:"text-sm text-gray-500",children:e.duration&&(0,o.LU)(e.duration)}),(0,s.jsx)("span",{className:"text-xs ".concat(1===e.segments.length?"text-green-600":"text-orange-500"),children:(0,o.iP)(e.segments.length-1)})]},t)}),(0,s.jsxs)("div",{className:"mt-4 pt-4 border-t flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"السعر الإجمالي"}),(0,s.jsx)("span",{className:"text-2xl font-bold text-blue-700",children:(0,o.T4)(r.price.grandTotal||r.price.total,r.price.currency)})]})]}),(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),a(d)},className:"space-y-6",children:[d.map((e,t)=>{var n,a,l,i,o,c,x,h,g;return(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6",children:[(0,s.jsxs)("h3",{className:"text-lg font-bold mb-4",children:["المسافر ",t+1,(null===(n=r.travelerPricings)||void 0===n?void 0:n[t])&&(0,s.jsxs)("span",{className:"text-sm font-normal text-gray-500 mr-2",children:["(","ADULT"===r.travelerPricings[t].travelerType?"بالغ":"CHILD"===r.travelerPricings[t].travelerType?"طفل":"رضيع",")"]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الاسم الأول (بالإنجليزية)"}),(0,s.jsx)("input",{type:"text",required:!0,value:e.name.firstName,onChange:e=>m(t,"name.firstName",e.target.value.toUpperCase()),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"MOHAMMED"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"اسم العائلة (بالإنجليزية)"}),(0,s.jsx)("input",{type:"text",required:!0,value:e.name.lastName,onChange:e=>m(t,"name.lastName",e.target.value.toUpperCase()),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"ALHARBI"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"تاريخ الميلاد"}),(0,s.jsx)("input",{type:"date",required:!0,value:e.dateOfBirth||"",onChange:e=>m(t,"dateOfBirth",e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الجنس"}),(0,s.jsxs)("select",{value:e.gender||"MALE",onChange:e=>m(t,"gender",e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,s.jsx)("option",{value:"MALE",children:"ذكر"}),(0,s.jsx)("option",{value:"FEMALE",children:"أنثى"})]})]}),0===t&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"البريد الإلكتروني"}),(0,s.jsx)("input",{type:"email",required:!0,value:(null===(a=e.contact)||void 0===a?void 0:a.emailAddress)||"",onChange:e=>m(t,"contact.emailAddress",e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"email@example.com",dir:"ltr"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"رقم الجوال"}),(0,s.jsx)("input",{type:"tel",required:!0,value:(null===(o=e.contact)||void 0===o?void 0:null===(i=o.phones)||void 0===i?void 0:null===(l=i[0])||void 0===l?void 0:l.number)||"",onChange:e=>{let r={...d[t]};r.contact||(r.contact={}),r.contact.phones||(r.contact.phones=[{deviceType:"MOBILE",countryCallingCode:"966",number:""}]),r.contact.phones[0].number=e.target.value;let s=[...d];s[t]=r,u(s)},className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"5XXXXXXXX",dir:"ltr"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"رقم جواز السفر"}),(0,s.jsx)("input",{type:"text",required:!0,value:(null===(x=e.documents)||void 0===x?void 0:null===(c=x[0])||void 0===c?void 0:c.number)||"",onChange:e=>{let r={...d[t]};r.documents||(r.documents=[{documentType:"PASSPORT",number:"",holder:!0}]),r.documents[0].number=e.target.value.toUpperCase();let s=[...d];s[t]=r,u(s)},className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",dir:"ltr"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"تاريخ انتهاء الجواز"}),(0,s.jsx)("input",{type:"date",required:!0,value:(null===(g=e.documents)||void 0===g?void 0:null===(h=g[0])||void 0===h?void 0:h.expiryDate)||"",onChange:e=>{let r={...d[t]};r.documents||(r.documents=[{documentType:"PASSPORT",number:"",holder:!0}]),r.documents[0].expiryDate=e.target.value;let s=[...d];s[t]=r,u(s)},className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]})]},t)}),(0,s.jsx)("button",{type:"submit",disabled:i,className:"w-full py-4 bg-gradient-to-l from-green-600 to-green-700 text-white font-bold rounded-xl hover:from-green-700 hover:to-green-800 disabled:opacity-50 transition-all text-lg",children:i?(0,s.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[(0,s.jsx)("div",{className:"animate-spin h-5 w-5 border-2 border-white rounded-full border-t-transparent"}),"جاري الحجز..."]}):"✅ تأكيد الحجز"})]})]})}function u(){var e,t,r;let[l,o]=(0,n.useState)("search"),[u,m]=(0,n.useState)(!1),[x,h]=(0,n.useState)(!1),[g,f]=(0,n.useState)([]),[p,b]=(0,n.useState)({}),[v,y]=(0,n.useState)(null),[j,N]=(0,n.useState)(null),[w,S]=(0,n.useState)(""),C=async e=>{m(!0),S("");try{let t=await a.cl.search(e);f(t.data||[]),b(t.dictionaries||{}),o("results")}catch(e){S(e.message||"حدث خطأ أثناء البحث")}finally{m(!1)}},T=async e=>{try{var t,r;m(!0);let s=await a.cl.pricing({type:"flight-offers-pricing",flightOffers:[e]}),n=(null===(r=s.data)||void 0===r?void 0:null===(t=r.flightOffers)||void 0===t?void 0:t[0])||e;y(n),o("booking")}catch(t){y(e),o("booking")}finally{m(!1)}},k=async e=>{if(v){h(!0),S("");try{let t=await a.cl.book({data:{type:"flight-order",flightOffers:[v],travelers:e,ticketingAgreement:{option:"DELAY_TO_QUEUE",dateTime:""}}});N(t),o("confirmation")}catch(e){S(e.message||"حدث خطأ أثناء الحجز")}finally{h(!1)}}};return(0,s.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-blue-50 to-white",dir:"rtl",children:[(0,s.jsx)("div",{className:"bg-gradient-to-l from-blue-900 to-blue-700 text-white py-12 px-4",children:(0,s.jsxs)("div",{className:"max-w-5xl mx-auto text-center",children:[(0,s.jsx)("h1",{className:"text-4xl font-bold mb-2",children:"✈️ حجز الرحلات"}),(0,s.jsx)("p",{className:"text-blue-200 text-lg",children:"ابحث عن أفضل العروض من شركات الطيران العالمية"})]})}),(0,s.jsxs)("div",{className:"max-w-5xl mx-auto px-4 -mt-8 pb-12",children:[w&&(0,s.jsxs)("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-xl text-red-700 text-center",children:["⚠️ ",w]}),"search"===l&&(0,s.jsx)(i,{onSearch:C,loading:u}),"results"===l&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("button",{onClick:()=>o("search"),className:"text-blue-600 hover:text-blue-800 mb-4 flex items-center gap-1",children:"→ تعديل البحث"}),(0,s.jsx)(c,{offers:g,onSelect:T,dictionaries:p})]}),"booking"===l&&v&&(0,s.jsx)(d,{offer:v,onBook:k,onBack:()=>o("results"),loading:x}),"confirmation"===l&&j&&(0,s.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 text-center",children:[(0,s.jsx)("div",{className:"text-6xl mb-4",children:"\uD83C\uDF89"}),(0,s.jsx)("h2",{className:"text-2xl font-bold text-green-700 mb-2",children:"تم الحجز بنجاح!"}),(0,s.jsxs)("p",{className:"text-gray-600 mb-6",children:["رقم الحجز: ",(0,s.jsx)("span",{className:"font-mono font-bold text-lg",children:(null===(e=j.data)||void 0===e?void 0:e.id)||"N/A"})]}),null===(r=j.data)||void 0===r?void 0:null===(t=r.associatedRecords)||void 0===t?void 0:t.map((e,t)=>(0,s.jsxs)("div",{className:"text-sm text-gray-500",children:["رقم التأكيد: ",e.reference]},t)),(0,s.jsx)("button",{onClick:()=>{o("search"),f([]),y(null),N(null)},className:"mt-8 px-8 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"بحث جديد"})]})]})]})}},7855:function(e,t,r){"use strict";r.d(t,{cl:function(){return a},kO:function(){return i},rT:function(){return l},vt:function(){return c},z4:function(){return o}});let s=r(257).env.NEXT_PUBLIC_APP_URL||"";async function n(e,t){let r=await fetch("".concat(s).concat(e),{...t,headers:{"Content-Type":"application/json",...null==t?void 0:t.headers}});if(!r.ok)throw Error((await r.json().catch(()=>({error:r.statusText}))).error||"API Error: ".concat(r.status));return r.json()}let a={search:e=>n("/api/flights/search",{method:"POST",body:JSON.stringify(e)}),pricing:e=>n("/api/flights/pricing",{method:"POST",body:JSON.stringify(e)}),book:e=>n("/api/flights/book",{method:"POST",body:JSON.stringify(e)}),getOrder:e=>n("/api/flights/orders/".concat(e)),cancelOrder:e=>n("/api/flights/orders/".concat(e),{method:"DELETE"}),status:e=>{let t=new URLSearchParams(e).toString();return n("/api/flights/status?".concat(t))},seatMaps:e=>n("/api/flights/seatmaps",{method:"POST",body:JSON.stringify(e)}),cheapestDates:e=>{let t=new URLSearchParams(e).toString();return n("/api/flights/cheapest-dates?".concat(t))}},l={searchByCity:e=>{let t=new URLSearchParams(e).toString();return n("/api/hotels/search?".concat(t))},searchOffers:e=>n("/api/hotels/offers",{method:"POST",body:JSON.stringify(e)}),autocomplete:e=>n("/api/hotels/autocomplete?keyword=".concat(encodeURIComponent(e))),book:e=>n("/api/hotels/book",{method:"POST",body:JSON.stringify(e)})},i={search:e=>n("/api/transfers/search",{method:"POST",body:JSON.stringify(e)}),book:e=>n("/api/transfers/book",{method:"POST",body:JSON.stringify(e)}),cancel:e=>n("/api/transfers/cancel",{method:"POST",body:JSON.stringify(e)})},o={search:e=>{let t=new URLSearchParams(e).toString();return n("/api/activities/search?".concat(t))},get:e=>n("/api/activities/".concat(e))},c={search:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"AIRPORT,CITY";return n("/api/locations?keyword=".concat(encodeURIComponent(e),"&subType=").concat(t))},airlines:e=>n("/api/airlines".concat(e?"?airlineCodes=".concat(e):""))}},4508:function(e,t,r){"use strict";function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"SAR",r="string"==typeof e?parseFloat(e):e;return new Intl.NumberFormat("ar-SA",{style:"currency",currency:t,minimumFractionDigits:0,maximumFractionDigits:2}).format(r)}function n(e){let t=e.match(/PT(?:(\d+)H)?(?:(\d+)M)?/);if(!t)return e;let r=t[1]?"".concat(t[1],"س"):"",s=t[2]?"".concat(t[2],"د"):"";return"".concat(r," ").concat(s).trim()}function a(e){return new Date(e).toLocaleTimeString("ar-SA",{hour:"2-digit",minute:"2-digit",hour12:!1})}function l(e){return 0===e?"مباشر":1===e?"توقف واحد":2===e?"توقفان":"".concat(e," توقفات")}function i(e,t){return e.length<=t?e:e.substring(0,t)+"..."}r.d(t,{$G:function(){return i},LU:function(){return n},T4:function(){return s},iP:function(){return l},mr:function(){return a}})},257:function(e,t,r){"use strict";var s,n;e.exports=(null==(s=r.g.process)?void 0:s.env)&&"object"==typeof(null==(n=r.g.process)?void 0:n.env)?r.g.process:r(4227)},4227:function(e){!function(){var t={229:function(e){var t,r,s,n=e.exports={};function a(){throw Error("setTimeout has not been defined")}function l(){throw Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===a||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:a}catch(e){t=a}try{r="function"==typeof clearTimeout?clearTimeout:l}catch(e){r=l}}();var o=[],c=!1,d=-1;function u(){c&&s&&(c=!1,s.length?o=s.concat(o):d=-1,o.length&&m())}function m(){if(!c){var e=i(u);c=!0;for(var t=o.length;t;){for(s=o,o=[];++d<t;)s&&s[d].run();d=-1,t=o.length}s=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===l||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function x(e,t){this.fun=e,this.array=t}function h(){}n.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];o.push(new x(e,t)),1!==o.length||c||i(m)},x.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=h,n.addListener=h,n.once=h,n.off=h,n.removeListener=h,n.removeAllListeners=h,n.emit=h,n.prependListener=h,n.prependOnceListener=h,n.listeners=function(e){return[]},n.binding=function(e){throw Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw Error("process.chdir is not supported")},n.umask=function(){return 0}}},r={};function s(e){var n=r[e];if(void 0!==n)return n.exports;var a=r[e]={exports:{}},l=!0;try{t[e](a,a.exports,s),l=!1}finally{l&&delete r[e]}return a.exports}s.ab="//";var n=s(229);e.exports=n}()}},function(e){e.O(0,[971,117,744],function(){return e(e.s=4107)}),_N_E=e.O()}]);