(()=>{var e={};e.id=892,e.ids=[892],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4902:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>c,routeModule:()=>x,tree:()=>o}),s(9711),s(1506),s(5866);var a=s(3191),r=s(8716),l=s(7922),i=s.n(l),n=s(5231),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);s.d(t,d);let o=["",{children:["transfers",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,9711)),"C:\\Users\\ishou\\Desktop\\MashroukGit\\Tmahshruk\\CleanMashroky\\amadeus-api\\app\\transfers\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,1506)),"C:\\Users\\ishou\\Desktop\\MashroukGit\\Tmahshruk\\CleanMashroky\\amadeus-api\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\ishou\\Desktop\\MashroukGit\\Tmahshruk\\CleanMashroky\\amadeus-api\\app\\transfers\\page.tsx"],m="/transfers/page",u={require:s,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/transfers/page",pathname:"/transfers",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},8591:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,9404,23))},862:(e,t,s)=>{Promise.resolve().then(s.bind(s,6170))},9362:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2994,23)),Promise.resolve().then(s.t.bind(s,6114,23)),Promise.resolve().then(s.t.bind(s,9727,23)),Promise.resolve().then(s.t.bind(s,9671,23)),Promise.resolve().then(s.t.bind(s,1868,23)),Promise.resolve().then(s.t.bind(s,4759,23))},6170:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var a=s(326),r=s(7577),l=s(8528),i=s(7863);let n={PRIVATE:"خاص",SHARED:"مشترك",TAXI:"تاكسي",HOURLY:"بالساعة",AIRPORT_EXPRESS:"قطار سريع",AIRPORT_BUS:"باص المطار"};function d(){let[e,t]=(0,r.useState)("search"),[s,d]=(0,r.useState)(!1),[o,c]=(0,r.useState)(""),[m,u]=(0,r.useState)(""),[x,h]=(0,r.useState)(""),[p,g]=(0,r.useState)(""),[b,f]=(0,r.useState)(""),[y,v]=(0,r.useState)(1),[j,N]=(0,r.useState)(""),[S,w]=(0,r.useState)([]),[k,P]=(0,r.useState)(null),[C,D]=(0,r.useState)(null),[T,O]=(0,r.useState)({firstName:"",lastName:""}),[A,R]=(0,r.useState)(""),[$,_]=(0,r.useState)(""),[q,E]=(0,r.useState)(""),U=async e=>{e.preventDefault(),d(!0),c("");try{let e={startLocationCode:m,startDateTime:new Date(b).toISOString(),passengers:y};x&&(e.endLocationCode=x),p&&(e.endAddressLine=p),j&&(e.transferType=j);let s=await l.kO.search(e);w(s.data||[]),t("results")}catch(e){c(e.message)}finally{d(!1)}},I=async e=>{if(e.preventDefault(),k){d(!0),c("");try{let e=await l.kO.book({offerId:k.id,data:{passengers:[{firstName:T.firstName,lastName:T.lastName,contacts:{phoneNumber:$,email:A}}],flightNumber:q||void 0,payment:{methodOfPayment:"CREDIT_CARD",creditCard:{number:"4111111111111111",holderName:`${T.firstName} ${T.lastName}`,vendorCode:"VI",expiryDate:"2026-12"}}}});D(e),t("confirmation")}catch(e){c(e.message)}finally{d(!1)}}};return(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-emerald-50 to-white",dir:"rtl",children:[a.jsx("div",{className:"bg-gradient-to-l from-emerald-900 to-emerald-700 text-white py-12 px-4",children:(0,a.jsxs)("div",{className:"max-w-5xl mx-auto text-center",children:[a.jsx("h1",{className:"text-4xl font-bold mb-2",children:"\uD83D\uDE97 حجز النقل والتوصيل"}),a.jsx("p",{className:"text-emerald-200 text-lg",children:"خدمات نقل خاصة ومشتركة من وإلى المطار"})]})}),(0,a.jsxs)("div",{className:"max-w-5xl mx-auto px-4 -mt-8 pb-12",children:[o&&(0,a.jsxs)("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-xl text-red-700 text-center",children:["⚠️ ",o]}),"search"===e&&(0,a.jsxs)("form",{onSubmit:U,className:"bg-white rounded-2xl shadow-xl p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"من (رمز المطار/المحطة)"}),a.jsx("input",{type:"text",required:!0,maxLength:3,value:m,onChange:e=>u(e.target.value.toUpperCase()),className:"w-full px-4 py-3 border border-gray-300 rounded-lg text-center font-mono text-xl",placeholder:"RUH",dir:"ltr"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"إلى (رمز أو عنوان)"}),a.jsx("input",{type:"text",value:x||p,onChange:e=>{let t=e.target.value;t.length<=3&&/^[A-Z]*$/i.test(t)?(h(t.toUpperCase()),g("")):(g(t),h(""))},className:"w-full px-4 py-3 border border-gray-300 rounded-lg",placeholder:"JED أو عنوان الفندق"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"تاريخ ووقت الانطلاق"}),a.jsx("input",{type:"datetime-local",required:!0,value:b,onChange:e=>f(e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"عدد الركاب"}),a.jsx("select",{value:y,onChange:e=>v(parseInt(e.target.value)),className:"w-full px-4 py-3 border border-gray-300 rounded-lg",children:[1,2,3,4,5,6,7,8].map(e=>a.jsx("option",{value:e,children:e},e))})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"نوع الخدمة"}),(0,a.jsxs)("select",{value:j,onChange:e=>N(e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg",children:[a.jsx("option",{value:"",children:"الكل"}),Object.entries(n).map(([e,t])=>a.jsx("option",{value:e,children:t},e))]})]})]}),a.jsx("button",{type:"submit",disabled:s,className:"w-full py-4 bg-gradient-to-l from-emerald-600 to-emerald-700 text-white font-bold rounded-xl disabled:opacity-50 text-lg",children:s?"جاري البحث...":"\uD83D\uDD0D بحث عن خدمات النقل"})]}),"results"===e&&(0,a.jsxs)("div",{className:"space-y-4",children:[a.jsx("button",{onClick:()=>t("search"),className:"text-emerald-700 hover:text-emerald-900",children:"→ تعديل البحث"}),(0,a.jsxs)("h2",{className:"text-xl font-bold",children:[S.length," خيار نقل متاح"]}),0===S.length?a.jsx("div",{className:"text-center py-12 bg-white rounded-xl shadow",children:a.jsx("p",{className:"text-xl text-gray-600",children:"لم يتم العثور على خدمات نقل"})}):S.map(e=>(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6 hover:shadow-lg transition-shadow",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("span",{className:"px-3 py-1 bg-emerald-100 text-emerald-700 rounded-full text-sm font-medium",children:n[e.transferType]||e.transferType}),e.serviceProvider?.name&&a.jsx("span",{className:"text-sm text-gray-500",children:e.serviceProvider.name})]}),e.vehicle&&(0,a.jsxs)("div",{className:"text-sm text-gray-600 mb-1",children:["\uD83D\uDE98 ",e.vehicle.description||e.vehicle.category,e.vehicle.seats?.[0]?.count&&` — ${e.vehicle.seats[0].count} مقعد`]}),e.duration&&(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:["⏱️ المدة: ",e.duration]}),e.distance&&(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:["\uD83D\uDCCD المسافة: ",e.distance.value," ",e.distance.unit]})]}),(0,a.jsxs)("div",{className:"text-left",children:[a.jsx("div",{className:"text-2xl font-bold text-emerald-700",children:(0,i.T4)(e.quotation.monetaryAmount||e.quotation.totalTransferAmount?.monetaryAmount||"0",e.quotation.currencyCode||"SAR")}),e.quotation.isEstimated&&a.jsx("div",{className:"text-xs text-gray-400",children:"سعر تقديري"}),a.jsx("button",{onClick:()=>{P(e),t("booking")},className:"mt-2 px-6 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700",children:"احجز"})]})]}),e.cancellationRules&&e.cancellationRules.length>0&&(0,a.jsxs)("div",{className:"mt-3 pt-3 border-t text-xs text-gray-400",children:["سياسة الإلغاء: ",e.cancellationRules[0].ruleDescription]})]},e.id))]}),"booking"===e&&k&&(0,a.jsxs)("form",{onSubmit:I,className:"bg-white rounded-2xl shadow-xl p-6 space-y-6",children:[a.jsx("button",{type:"button",onClick:()=>t("results"),className:"text-emerald-700",children:"→ رجوع"}),a.jsx("div",{className:"p-4 bg-emerald-50 rounded-lg",children:(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsxs)("span",{children:[n[k.transferType],": ",k.vehicle?.description]}),a.jsx("span",{className:"font-bold text-emerald-700",children:(0,i.T4)(k.quotation.monetaryAmount||"0",k.quotation.currencyCode||"SAR")})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الاسم الأول"}),a.jsx("input",{type:"text",required:!0,value:T.firstName,onChange:e=>O(t=>({...t,firstName:e.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"اسم العائلة"}),a.jsx("input",{type:"text",required:!0,value:T.lastName,onChange:e=>O(t=>({...t,lastName:e.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"البريد الإلكتروني"}),a.jsx("input",{type:"email",required:!0,value:A,onChange:e=>R(e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg",dir:"ltr"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"رقم الجوال"}),a.jsx("input",{type:"tel",required:!0,value:$,onChange:e=>_(e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg",dir:"ltr"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"رقم الرحلة (اختياري)"}),a.jsx("input",{type:"text",value:q,onChange:e=>E(e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg",placeholder:"SV123",dir:"ltr"})]})]}),a.jsx("button",{type:"submit",disabled:s,className:"w-full py-4 bg-gradient-to-l from-green-600 to-green-700 text-white font-bold rounded-xl disabled:opacity-50 text-lg",children:s?"جاري الحجز...":"✅ تأكيد حجز النقل"})]}),"confirmation"===e&&C&&(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 text-center",children:[a.jsx("div",{className:"text-6xl mb-4",children:"\uD83C\uDF89"}),a.jsx("h2",{className:"text-2xl font-bold text-green-700 mb-2",children:"تم حجز النقل بنجاح!"}),(0,a.jsxs)("p",{className:"text-gray-600",children:["رقم الحجز: ",a.jsx("span",{className:"font-mono font-bold",children:C.data?.id||"N/A"})]}),a.jsx("button",{onClick:()=>{t("search"),D(null)},className:"mt-8 px-8 py-3 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700",children:"بحث جديد"})]})]})]})}},8528:(e,t,s)=>{"use strict";s.d(t,{cl:()=>l,kO:()=>n,rT:()=>i,z4:()=>d});let a=process.env.NEXT_PUBLIC_APP_URL||"";async function r(e,t){let s=await fetch(`${a}${e}`,{...t,headers:{"Content-Type":"application/json",...t?.headers}});if(!s.ok)throw Error((await s.json().catch(()=>({error:s.statusText}))).error||`API Error: ${s.status}`);return s.json()}let l={search:e=>r("/api/flights/search",{method:"POST",body:JSON.stringify(e)}),pricing:e=>r("/api/flights/pricing",{method:"POST",body:JSON.stringify(e)}),book:e=>r("/api/flights/book",{method:"POST",body:JSON.stringify(e)}),getOrder:e=>r(`/api/flights/orders/${e}`),cancelOrder:e=>r(`/api/flights/orders/${e}`,{method:"DELETE"}),status:e=>{let t=new URLSearchParams(e).toString();return r(`/api/flights/status?${t}`)},seatMaps:e=>r("/api/flights/seatmaps",{method:"POST",body:JSON.stringify(e)}),cheapestDates:e=>{let t=new URLSearchParams(e).toString();return r(`/api/flights/cheapest-dates?${t}`)}},i={searchByCity:e=>{let t=new URLSearchParams(e).toString();return r(`/api/hotels/search?${t}`)},searchOffers:e=>r("/api/hotels/offers",{method:"POST",body:JSON.stringify(e)}),autocomplete:e=>r(`/api/hotels/autocomplete?keyword=${encodeURIComponent(e)}`),book:e=>r("/api/hotels/book",{method:"POST",body:JSON.stringify(e)})},n={search:e=>r("/api/transfers/search",{method:"POST",body:JSON.stringify(e)}),book:e=>r("/api/transfers/book",{method:"POST",body:JSON.stringify(e)}),cancel:e=>r("/api/transfers/cancel",{method:"POST",body:JSON.stringify(e)})},d={search:e=>{let t=new URLSearchParams(e).toString();return r(`/api/activities/search?${t}`)},get:e=>r(`/api/activities/${e}`)}},7863:(e,t,s)=>{"use strict";function a(e,t="SAR"){let s="string"==typeof e?parseFloat(e):e;return new Intl.NumberFormat("ar-SA",{style:"currency",currency:t,minimumFractionDigits:0,maximumFractionDigits:2}).format(s)}function r(e){let t=e.match(/PT(?:(\d+)H)?(?:(\d+)M)?/);if(!t)return e;let s=t[1]?`${t[1]}س`:"",a=t[2]?`${t[2]}د`:"";return`${s} ${a}`.trim()}function l(e){return new Date(e).toLocaleTimeString("ar-SA",{hour:"2-digit",minute:"2-digit",hour12:!1})}function i(e){return 0===e?"مباشر":1===e?"توقف واحد":2===e?"توقفان":`${e} توقفات`}function n(e,t){return e.length<=t?e:e.substring(0,t)+"..."}s.d(t,{$G:()=>n,LU:()=>r,T4:()=>a,iP:()=>i,mr:()=>l})},1506:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i,metadata:()=>l});var a=s(9510);s(7272);var r=s(7371);let l={title:"مشروك — حجز الرحلات والفنادق",description:"منصة حجز السفر المتكاملة — رحلات، فنادق، نقل، أنشطة"};function i({children:e}){return a.jsx("html",{lang:"ar",dir:"rtl",children:(0,a.jsxs)("body",{className:"antialiased",children:[a.jsx("nav",{className:"bg-white border-b shadow-sm sticky top-0 z-50",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 flex items-center justify-between h-16",children:[a.jsx(r.default,{href:"/",className:"text-xl font-bold text-blue-700",children:"✈️ مشروك"}),(0,a.jsxs)("div",{className:"flex items-center gap-6",children:[a.jsx(r.default,{href:"/flights",className:"text-gray-600 hover:text-blue-700 font-medium",children:"الرحلات"}),a.jsx(r.default,{href:"/hotels",className:"text-gray-600 hover:text-amber-700 font-medium",children:"الفنادق"}),a.jsx(r.default,{href:"/transfers",className:"text-gray-600 hover:text-emerald-700 font-medium",children:"النقل"}),a.jsx(r.default,{href:"/activities",className:"text-gray-600 hover:text-purple-700 font-medium",children:"الأنشطة"}),a.jsx(r.default,{href:"/admin",className:"text-gray-400 hover:text-gray-600 text-sm",children:"الإدارة"})]})]})}),e]})})}},9711:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(8570).createProxy)(String.raw`C:\Users\ishou\Desktop\MashroukGit\Tmahshruk\CleanMashroky\amadeus-api\app\transfers\page.tsx#default`)},7272:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[276,707],()=>s(4902));module.exports=a})();