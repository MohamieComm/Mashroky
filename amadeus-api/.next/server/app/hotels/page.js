(()=>{var e={};e.id=887,e.ids=[887],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9639:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>h,originalPathname:()=>m,pages:()=>c,routeModule:()=>u,tree:()=>d}),s(2987),s(1506),s(5866);var r=s(3191),a=s(8716),l=s(7922),i=s.n(l),o=s(5231),n={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>o[e]);s.d(t,n);let d=["",{children:["hotels",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,2987)),"C:\\Users\\ishou\\Desktop\\MashroukGit\\Tmahshruk\\CleanMashroky\\amadeus-api\\app\\hotels\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,1506)),"C:\\Users\\ishou\\Desktop\\MashroukGit\\Tmahshruk\\CleanMashroky\\amadeus-api\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\ishou\\Desktop\\MashroukGit\\Tmahshruk\\CleanMashroky\\amadeus-api\\app\\hotels\\page.tsx"],m="/hotels/page",h={require:s,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/hotels/page",pathname:"/hotels",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},8591:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,9404,23))},8200:(e,t,s)=>{Promise.resolve().then(s.bind(s,4484))},9362:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2994,23)),Promise.resolve().then(s.t.bind(s,6114,23)),Promise.resolve().then(s.t.bind(s,9727,23)),Promise.resolve().then(s.t.bind(s,9671,23)),Promise.resolve().then(s.t.bind(s,1868,23)),Promise.resolve().then(s.t.bind(s,4759,23))},4484:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s(326),a=s(7577),l=s(8528),i=s(7863);let o={ROOM_ONLY:"غرفة فقط",BREAKFAST:"إفطار",HALF_BOARD:"نصف إقامة",FULL_BOARD:"إقامة كاملة",ALL_INCLUSIVE:"شامل الجميع"};function n(){let[e,t]=(0,a.useState)("search"),[s,n]=(0,a.useState)(!1),[d,c]=(0,a.useState)(""),[m,h]=(0,a.useState)(""),[u,x]=(0,a.useState)(""),[g,p]=(0,a.useState)(""),[b,f]=(0,a.useState)(1),[y,N]=(0,a.useState)(1),[v,j]=(0,a.useState)([]),[w,S]=(0,a.useState)([]),[k,C]=(0,a.useState)(null),[P,T]=(0,a.useState)(null),[O,D]=(0,a.useState)({firstName:"",lastName:""}),[I,$]=(0,a.useState)(""),[A,_]=(0,a.useState)(""),R=async e=>{if(e.preventDefault(),m){n(!0),c("");try{let e=await l.rT.searchByCity({cityCode:m});j(e.data||[]),t("hotels")}catch(e){c(e.message)}finally{n(!1)}}},L=async e=>{n(!0),c("");try{let s=await l.rT.searchOffers({hotelIds:e.slice(0,20),adults:b,checkInDate:u,checkOutDate:g,roomQuantity:y,currency:"SAR",bestRateOnly:!0});S(s.data||[]),t("offers")}catch(e){c(e.message)}finally{n(!1)}},E=async e=>{if(e.preventDefault(),k){n(!0),c("");try{let e=await l.rT.book({data:{type:"hotel-order",guests:[{tid:1,title:"MR",firstName:O.firstName,lastName:O.lastName,phone:A,email:I}],roomAssociations:[{guestReferences:[{guestReference:"1"}],hotelOfferId:k.offer.id}],payment:{method:"CREDIT_CARD",paymentCard:{paymentCardInfo:{vendorCode:"VI",holderName:`${O.firstName} ${O.lastName}`,cardNumber:"4111111111111111",expiryDate:"2026-12"}}}}});T(e),t("confirmation")}catch(e){c(e.message)}finally{n(!1)}}};return(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-amber-50 to-white",dir:"rtl",children:[r.jsx("div",{className:"bg-gradient-to-l from-amber-900 to-amber-700 text-white py-12 px-4",children:(0,r.jsxs)("div",{className:"max-w-5xl mx-auto text-center",children:[r.jsx("h1",{className:"text-4xl font-bold mb-2",children:"\uD83C\uDFE8 حجز الفنادق"}),r.jsx("p",{className:"text-amber-200 text-lg",children:"أفضل الفنادق في وجهتك المفضلة"})]})}),(0,r.jsxs)("div",{className:"max-w-5xl mx-auto px-4 -mt-8 pb-12",children:[d&&(0,r.jsxs)("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-xl text-red-700 text-center",children:["⚠️ ",d]}),"search"===e&&(0,r.jsxs)("form",{onSubmit:R,className:"bg-white rounded-2xl shadow-xl p-6 space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"رمز المدينة (IATA)"}),r.jsx("input",{type:"text",required:!0,maxLength:3,value:m,onChange:e=>h(e.target.value.toUpperCase()),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 text-center font-mono text-xl",placeholder:"RUH",dir:"ltr"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"عدد الغرف"}),r.jsx("select",{value:y,onChange:e=>N(parseInt(e.target.value)),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500",children:[1,2,3,4,5].map(e=>r.jsx("option",{value:e,children:e},e))})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"تاريخ الدخول"}),r.jsx("input",{type:"date",required:!0,value:u,onChange:e=>x(e.target.value),min:new Date().toISOString().split("T")[0],className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"تاريخ الخروج"}),r.jsx("input",{type:"date",required:!0,value:g,onChange:e=>p(e.target.value),min:u||new Date().toISOString().split("T")[0],className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"عدد البالغين"}),r.jsx("select",{value:b,onChange:e=>f(parseInt(e.target.value)),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500",children:[1,2,3,4].map(e=>r.jsx("option",{value:e,children:e},e))})]})]}),r.jsx("button",{type:"submit",disabled:s,className:"w-full py-4 bg-gradient-to-l from-amber-600 to-amber-700 text-white font-bold rounded-xl hover:from-amber-700 hover:to-amber-800 disabled:opacity-50 transition-all text-lg",children:s?"جاري البحث...":"\uD83D\uDD0D بحث عن فنادق"})]}),"hotels"===e&&(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[r.jsx("button",{onClick:()=>t("search"),className:"text-amber-700 hover:text-amber-900",children:"→ تعديل البحث"}),(0,r.jsxs)("h2",{className:"text-xl font-bold",children:[v.length," فندق متاح في ",m]})]}),r.jsx("button",{onClick:()=>L(v.map(e=>e.hotelId)),disabled:s,className:"w-full py-3 bg-amber-600 text-white rounded-lg hover:bg-amber-700 disabled:opacity-50",children:s?"جاري تحميل الأسعار...":"\uD83D\uDCB0 عرض الأسعار لجميع الفنادق"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:v.slice(0,40).map(e=>(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-4 hover:shadow-lg transition-shadow",children:[r.jsx("h3",{className:"font-bold text-lg mb-1",children:e.name||e.hotelId}),(0,r.jsxs)("div",{className:"text-sm text-gray-500 mb-2",children:[e.geoCode&&`${e.geoCode.latitude.toFixed(3)}, ${e.geoCode.longitude.toFixed(3)}`,e.distance&&` — ${e.distance.value} ${e.distance.unit}`]}),(0,r.jsxs)("div",{className:"text-xs text-gray-400",children:["ID: ",e.hotelId,e.chainCode&&` | سلسلة: ${e.chainCode}`]})]},e.hotelId))})]}),"offers"===e&&(0,r.jsxs)("div",{className:"space-y-4",children:[r.jsx("button",{onClick:()=>t("hotels"),className:"text-amber-700 hover:text-amber-900",children:"→ رجوع لقائمة الفنادق"}),0===w.length?r.jsx("div",{className:"text-center py-12 bg-white rounded-xl shadow",children:r.jsx("p",{className:"text-xl text-gray-600",children:"لا تتوفر عروض الأسعار حالياً"})}):w.map(e=>(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-md overflow-hidden",children:[r.jsx("div",{className:"p-4 bg-amber-50 border-b",children:r.jsx("h3",{className:"font-bold text-lg",children:e.hotel.name||e.hotel.hotelId})}),e.offers?.map(s=>r.jsxs("div",{className:"p-4 border-b last:border-b-0 flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:s.room.typeEstimated?.category||"غرفة قياسية"}),r.jsx("div",{className:"text-sm text-gray-500",children:s.room.description?.text?.substring(0,80)}),s.boardType&&r.jsx("span",{className:"inline-block mt-1 text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded",children:o[s.boardType]||s.boardType})]}),r.jsxs("div",{className:"text-left",children:[r.jsx("div",{className:"text-xl font-bold text-amber-700",children:i.T4(s.price.total||"0",s.price.currency||"SAR")}),r.jsx("button",{onClick:()=>{C({hotel:e.hotel,offer:s}),t("booking")},className:"mt-2 px-4 py-2 bg-amber-600 text-white text-sm rounded-lg hover:bg-amber-700",children:"احجز الآن"})]})]},s.id))]},e.hotel.hotelId))]}),"booking"===e&&k&&(0,r.jsxs)("form",{onSubmit:E,className:"bg-white rounded-2xl shadow-xl p-6 space-y-6",children:[r.jsx("button",{type:"button",onClick:()=>t("offers"),className:"text-amber-700 hover:text-amber-900",children:"→ رجوع"}),(0,r.jsxs)("div",{className:"p-4 bg-amber-50 rounded-lg",children:[r.jsx("h3",{className:"font-bold",children:k.hotel.name}),r.jsx("p",{className:"text-sm text-gray-600",children:k.offer.room.typeEstimated?.category}),r.jsx("p",{className:"text-xl font-bold text-amber-700 mt-2",children:(0,i.T4)(k.offer.price.total||"0",k.offer.price.currency||"SAR")})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الاسم الأول"}),r.jsx("input",{type:"text",required:!0,value:O.firstName,onChange:e=>D(t=>({...t,firstName:e.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"اسم العائلة"}),r.jsx("input",{type:"text",required:!0,value:O.lastName,onChange:e=>D(t=>({...t,lastName:e.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"البريد الإلكتروني"}),r.jsx("input",{type:"email",required:!0,value:I,onChange:e=>$(e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg",dir:"ltr"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"رقم الجوال"}),r.jsx("input",{type:"tel",required:!0,value:A,onChange:e=>_(e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg",dir:"ltr"})]})]}),r.jsx("button",{type:"submit",disabled:s,className:"w-full py-4 bg-gradient-to-l from-green-600 to-green-700 text-white font-bold rounded-xl disabled:opacity-50",children:s?"جاري الحجز...":"✅ تأكيد حجز الفندق"})]}),"confirmation"===e&&P&&(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 text-center",children:[r.jsx("div",{className:"text-6xl mb-4",children:"\uD83C\uDF89"}),r.jsx("h2",{className:"text-2xl font-bold text-green-700 mb-2",children:"تم حجز الفندق بنجاح!"}),(0,r.jsxs)("p",{className:"text-gray-600",children:["رقم الحجز: ",r.jsx("span",{className:"font-mono font-bold",children:P.data?.id||"N/A"})]}),r.jsx("button",{onClick:()=>{t("search"),T(null)},className:"mt-8 px-8 py-3 bg-amber-600 text-white rounded-lg hover:bg-amber-700",children:"بحث جديد"})]})]})]})}},8528:(e,t,s)=>{"use strict";s.d(t,{cl:()=>l,kO:()=>o,rT:()=>i,z4:()=>n});let r=process.env.NEXT_PUBLIC_APP_URL||"";async function a(e,t){let s=await fetch(`${r}${e}`,{...t,headers:{"Content-Type":"application/json",...t?.headers}});if(!s.ok)throw Error((await s.json().catch(()=>({error:s.statusText}))).error||`API Error: ${s.status}`);return s.json()}let l={search:e=>a("/api/flights/search",{method:"POST",body:JSON.stringify(e)}),pricing:e=>a("/api/flights/pricing",{method:"POST",body:JSON.stringify(e)}),book:e=>a("/api/flights/book",{method:"POST",body:JSON.stringify(e)}),getOrder:e=>a(`/api/flights/orders/${e}`),cancelOrder:e=>a(`/api/flights/orders/${e}`,{method:"DELETE"}),status:e=>{let t=new URLSearchParams(e).toString();return a(`/api/flights/status?${t}`)},seatMaps:e=>a("/api/flights/seatmaps",{method:"POST",body:JSON.stringify(e)}),cheapestDates:e=>{let t=new URLSearchParams(e).toString();return a(`/api/flights/cheapest-dates?${t}`)}},i={searchByCity:e=>{let t=new URLSearchParams(e).toString();return a(`/api/hotels/search?${t}`)},searchOffers:e=>a("/api/hotels/offers",{method:"POST",body:JSON.stringify(e)}),autocomplete:e=>a(`/api/hotels/autocomplete?keyword=${encodeURIComponent(e)}`),book:e=>a("/api/hotels/book",{method:"POST",body:JSON.stringify(e)})},o={search:e=>a("/api/transfers/search",{method:"POST",body:JSON.stringify(e)}),book:e=>a("/api/transfers/book",{method:"POST",body:JSON.stringify(e)}),cancel:e=>a("/api/transfers/cancel",{method:"POST",body:JSON.stringify(e)})},n={search:e=>{let t=new URLSearchParams(e).toString();return a(`/api/activities/search?${t}`)},get:e=>a(`/api/activities/${e}`)}},7863:(e,t,s)=>{"use strict";function r(e,t="SAR"){let s="string"==typeof e?parseFloat(e):e;return new Intl.NumberFormat("ar-SA",{style:"currency",currency:t,minimumFractionDigits:0,maximumFractionDigits:2}).format(s)}function a(e){let t=e.match(/PT(?:(\d+)H)?(?:(\d+)M)?/);if(!t)return e;let s=t[1]?`${t[1]}س`:"",r=t[2]?`${t[2]}د`:"";return`${s} ${r}`.trim()}function l(e){return new Date(e).toLocaleTimeString("ar-SA",{hour:"2-digit",minute:"2-digit",hour12:!1})}function i(e){return 0===e?"مباشر":1===e?"توقف واحد":2===e?"توقفان":`${e} توقفات`}function o(e,t){return e.length<=t?e:e.substring(0,t)+"..."}s.d(t,{$G:()=>o,LU:()=>a,T4:()=>r,iP:()=>i,mr:()=>l})},2987:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(8570).createProxy)(String.raw`C:\Users\ishou\Desktop\MashroukGit\Tmahshruk\CleanMashroky\amadeus-api\app\hotels\page.tsx#default`)},1506:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i,metadata:()=>l});var r=s(9510);s(7272);var a=s(7371);let l={title:"مشروك — حجز الرحلات والفنادق",description:"منصة حجز السفر المتكاملة — رحلات، فنادق، نقل، أنشطة"};function i({children:e}){return r.jsx("html",{lang:"ar",dir:"rtl",children:(0,r.jsxs)("body",{className:"antialiased",children:[r.jsx("nav",{className:"bg-white border-b shadow-sm sticky top-0 z-50",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 flex items-center justify-between h-16",children:[r.jsx(a.default,{href:"/",className:"text-xl font-bold text-blue-700",children:"✈️ مشروك"}),(0,r.jsxs)("div",{className:"flex items-center gap-6",children:[r.jsx(a.default,{href:"/flights",className:"text-gray-600 hover:text-blue-700 font-medium",children:"الرحلات"}),r.jsx(a.default,{href:"/hotels",className:"text-gray-600 hover:text-amber-700 font-medium",children:"الفنادق"}),r.jsx(a.default,{href:"/transfers",className:"text-gray-600 hover:text-emerald-700 font-medium",children:"النقل"}),r.jsx(a.default,{href:"/activities",className:"text-gray-600 hover:text-purple-700 font-medium",children:"الأنشطة"}),r.jsx(a.default,{href:"/admin",className:"text-gray-400 hover:text-gray-600 text-sm",children:"الإدارة"})]})]})}),e]})})}},7272:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[276,707],()=>s(9639));module.exports=r})();