"use strict";(()=>{var e={};e.id=541,e.ids=[541],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3211:(e,s,t)=>{t.r(s),t.d(s,{originalPathname:()=>g,patchFetch:()=>m,requestAsyncStorage:()=>c,routeModule:()=>l,serverHooks:()=>d,staticGenerationAsyncStorage:()=>h});var r={};t.r(r),t.d(r,{POST:()=>u,dynamic:()=>p});var o=t(9303),n=t(8716),a=t(3131),i=t(795);let p="force-dynamic";async function u(e){return(0,i.bO)(e)}let l=new o.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/flights/seatmaps/route",pathname:"/api/flights/seatmaps",filename:"route",bundlePath:"app/api/flights/seatmaps/route"},resolvedPagePath:"C:\\Users\\ishou\\Desktop\\MashroukGit\\Tmahshruk\\CleanMashroky\\amadeus-api\\app\\api\\flights\\seatmaps\\route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:c,staticGenerationAsyncStorage:h,serverHooks:d}=l,g="/api/flights/seatmaps/route";function m(){return(0,a.patchFetch)({serverHooks:d,staticGenerationAsyncStorage:h})}},795:(e,s,t)=>{t.d(s,{Gu:()=>u,P7:()=>c,UN:()=>i,Vw:()=>h,bO:()=>d,c0:()=>a,fu:()=>p,vn:()=>l});var r=t(7070),o=t(6149),n=t(1242);async function a(e){let s=Date.now();try{let t=await e.json(),a=(0,o.G)(),i=await a.shopping.flightOffers.search(t);return await (0,n.V)({endpoint:"/v2/shopping/flight-offers",method:"GET",requestParams:t,responseStatus:200,responseTimeMs:Date.now()-s}),r.NextResponse.json(i)}catch(e){return await (0,n.V)({endpoint:"/v2/shopping/flight-offers",method:"GET",responseStatus:e.status||500,responseTimeMs:Date.now()-s,errorMessage:e.message}),r.NextResponse.json({error:e.message,errors:e.errors},{status:e.status||500})}}async function i(e){let s=Date.now();try{let t=await e.json(),a=(0,o.G)(),i=await a.shopping.flightOffers.pricing(t);return await (0,n.V)({endpoint:"/v1/shopping/flight-offers/pricing",method:"POST",responseStatus:200,responseTimeMs:Date.now()-s}),r.NextResponse.json(i)}catch(e){return r.NextResponse.json({error:e.message,errors:e.errors},{status:e.status||500})}}async function p(e){let s=Date.now();try{let{searchParams:t}=new URL(e.url),a=Object.fromEntries(t.entries()),i=(0,o.G)(),p=await i.shopping.flightOffers.cheapestDates(a);return await (0,n.V)({endpoint:"/v1/shopping/flight-dates",method:"GET",requestParams:a,responseStatus:200,responseTimeMs:Date.now()-s}),r.NextResponse.json(p)}catch(e){return r.NextResponse.json({error:e.message,errors:e.errors},{status:e.status||500})}}async function u(e){let s=Date.now();try{let t=await e.json(),a=(0,o.G)(),i=await a.booking.flightOrders.create(t);return await (0,n.V)({endpoint:"/v1/booking/flight-orders",method:"POST",responseStatus:200,responseTimeMs:Date.now()-s}),r.NextResponse.json(i)}catch(e){return r.NextResponse.json({error:e.message,errors:e.errors},{status:e.status||500})}}async function l(e){let s=Date.now();try{let t=(0,o.G)(),a=await t.booking.flightOrders.get(e);return await (0,n.V)({endpoint:`/v1/booking/flight-orders/${e}`,method:"GET",responseStatus:200,responseTimeMs:Date.now()-s}),r.NextResponse.json(a)}catch(e){return r.NextResponse.json({error:e.message,errors:e.errors},{status:e.status||500})}}async function c(e){let s=Date.now();try{let t=(0,o.G)();return await t.booking.flightOrders.cancel(e),await (0,n.V)({endpoint:`/v1/booking/flight-orders/${e}`,method:"DELETE",responseStatus:200,responseTimeMs:Date.now()-s}),r.NextResponse.json({success:!0})}catch(e){return r.NextResponse.json({error:e.message,errors:e.errors},{status:e.status||500})}}async function h(e){let s=Date.now();try{let{searchParams:t}=new URL(e.url),a={carrierCode:t.get("carrierCode"),flightNumber:parseInt(t.get("flightNumber")),scheduledDepartureDate:t.get("scheduledDepartureDate")},i=(0,o.G)(),p=await i.schedule.flightStatus(a);return await (0,n.V)({endpoint:"/v2/schedule/flights",method:"GET",requestParams:a,responseStatus:200,responseTimeMs:Date.now()-s}),r.NextResponse.json(p)}catch(e){return r.NextResponse.json({error:e.message,errors:e.errors},{status:e.status||500})}}async function d(e){let s=Date.now();try{let t=await e.json(),a=(0,o.G)(),i=await a.shopping.seatMaps.post({data:t.flightOffers});return await (0,n.V)({endpoint:"/v1/shopping/seatmaps",method:"POST",responseStatus:200,responseTimeMs:Date.now()-s}),r.NextResponse.json(i)}catch(e){return r.NextResponse.json({error:e.message,errors:e.errors},{status:e.status||500})}}},1242:(e,s,t)=>{t.d(s,{V:()=>o});var r=t(5662);async function o(e){try{let s=(0,r.lx)();await s.from("api_logs").insert({user_id:e.userId||null,endpoint:e.endpoint,method:e.method,request_params:e.requestParams||null,response_status:e.responseStatus,response_time_ms:e.responseTimeMs,error_message:e.errorMessage||null,ip_address:e.ipAddress||null,user_agent:e.userAgent||null})}catch(e){console.error("[API Logger] Failed to log request:",e)}}},5662:(e,s,t)=>{t.d(s,{lx:()=>o});var r=t(7857);function o(){let e=process.env.NEXT_PUBLIC_SUPABASE_URL,s=process.env.SUPABASE_SERVICE_ROLE_KEY;if(!e||!s)throw Error("Missing Supabase server env vars");return(0,r.eI)(e,s,{auth:{autoRefreshToken:!1,persistSession:!1}})}}};var s=require("../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[276,972,857,149],()=>t(3211));module.exports=r})();