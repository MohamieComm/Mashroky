"use strict";(()=>{var e={};e.id=898,e.ids=[898],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},1467:(e,r,s)=>{s.r(r),s.d(r,{originalPathname:()=>f,patchFetch:()=>h,requestAsyncStorage:()=>d,routeModule:()=>c,serverHooks:()=>m,staticGenerationAsyncStorage:()=>l});var t={};s.r(t),s.d(t,{POST:()=>p,dynamic:()=>u});var n=s(9303),a=s(8716),o=s(3131),i=s(4494);let u="force-dynamic";async function p(e){return(0,i.nv)(e)}let c=new n.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/transfers/cancel/route",pathname:"/api/transfers/cancel",filename:"route",bundlePath:"app/api/transfers/cancel/route"},resolvedPagePath:"C:\\Users\\ishou\\Desktop\\MashroukGit\\Tmahshruk\\CleanMashroky\\amadeus-api\\app\\api\\transfers\\cancel\\route.ts",nextConfigOutput:"",userland:t}),{requestAsyncStorage:d,staticGenerationAsyncStorage:l,serverHooks:m}=c,f="/api/transfers/cancel/route";function h(){return(0,o.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:l})}},4494:(e,r,s)=>{s.d(r,{nv:()=>u,tP:()=>o,zA:()=>i});var t=s(7070),n=s(6149),a=s(1242);async function o(e){let r=Date.now();try{let s=await e.json(),o=(0,n.G)(),i=await o.shopping.transferOffers.search(s);return await (0,a.V)({endpoint:"/v1/shopping/transfer-offers",method:"POST",requestParams:s,responseStatus:200,responseTimeMs:Date.now()-r}),t.NextResponse.json(i)}catch(e){return t.NextResponse.json({error:e.message,errors:e.errors},{status:e.status||500})}}async function i(e){let r=Date.now();try{let{offerId:s,...o}=await e.json(),i=(0,n.G)(),u=await i.booking.transferOrders.create(s,o);return await (0,a.V)({endpoint:"/v1/ordering/transfer-orders",method:"POST",responseStatus:200,responseTimeMs:Date.now()-r}),t.NextResponse.json(u)}catch(e){return t.NextResponse.json({error:e.message,errors:e.errors},{status:e.status||500})}}async function u(e){let r=Date.now();try{let{orderId:s,confirmNbr:o}=await e.json(),i=(0,n.G)(),u=await i.booking.transferOrders.cancel(s,o);return await (0,a.V)({endpoint:`/v1/ordering/transfer-orders/${s}/transfers/cancellation`,method:"POST",responseStatus:200,responseTimeMs:Date.now()-r}),t.NextResponse.json(u)}catch(e){return t.NextResponse.json({error:e.message,errors:e.errors},{status:e.status||500})}}},1242:(e,r,s)=>{s.d(r,{V:()=>n});var t=s(5662);async function n(e){try{let r=(0,t.lx)();await r.from("api_logs").insert({user_id:e.userId||null,endpoint:e.endpoint,method:e.method,request_params:e.requestParams||null,response_status:e.responseStatus,response_time_ms:e.responseTimeMs,error_message:e.errorMessage||null,ip_address:e.ipAddress||null,user_agent:e.userAgent||null})}catch(e){console.error("[API Logger] Failed to log request:",e)}}},5662:(e,r,s)=>{s.d(r,{lx:()=>n});var t=s(7857);function n(){let e=process.env.NEXT_PUBLIC_SUPABASE_URL,r=process.env.SUPABASE_SERVICE_ROLE_KEY;if(!e||!r)throw Error("Missing Supabase server env vars");return(0,t.eI)(e,r,{auth:{autoRefreshToken:!1,persistSession:!1}})}}};var r=require("../../../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),t=r.X(0,[276,972,857,149],()=>s(1467));module.exports=t})();