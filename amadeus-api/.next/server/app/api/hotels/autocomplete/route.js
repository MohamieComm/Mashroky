"use strict";(()=>{var e={};e.id=307,e.ids=[307],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},7333:(e,t,s)=>{s.r(t),s.d(t,{originalPathname:()=>h,patchFetch:()=>g,requestAsyncStorage:()=>c,routeModule:()=>l,serverHooks:()=>m,staticGenerationAsyncStorage:()=>d});var r={};s.r(r),s.d(r,{GET:()=>p,dynamic:()=>i});var o=s(9303),a=s(8716),n=s(3131),u=s(8275);let i="force-dynamic";async function p(e){return(0,u.eq)(e)}let l=new o.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/hotels/autocomplete/route",pathname:"/api/hotels/autocomplete",filename:"route",bundlePath:"app/api/hotels/autocomplete/route"},resolvedPagePath:"C:\\Users\\ishou\\Desktop\\MashroukGit\\Tmahshruk\\CleanMashroky\\amadeus-api\\app\\api\\hotels\\autocomplete\\route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:c,staticGenerationAsyncStorage:d,serverHooks:m}=l,h="/api/hotels/autocomplete/route";function g(){return(0,n.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:d})}},8275:(e,t,s)=>{s.d(t,{I3:()=>n,Io:()=>p,Rv:()=>u,eq:()=>i});var r=s(7070),o=s(6149),a=s(1242);async function n(e){let t=Date.now();try{let{searchParams:s}=new URL(e.url),n=Object.fromEntries(s.entries()),u=(0,o.G)(),i=await u.shopping.hotelOffers.byCity(n);return await (0,a.V)({endpoint:"/v1/reference-data/locations/hotels/by-city",method:"GET",requestParams:n,responseStatus:200,responseTimeMs:Date.now()-t}),r.NextResponse.json(i)}catch(e){return r.NextResponse.json({error:e.message,errors:e.errors},{status:e.status||500})}}async function u(e){let t=Date.now();try{let s=await e.json(),n=(0,o.G)(),u=await n.shopping.hotelOffers.search(s);return await (0,a.V)({endpoint:"/v3/shopping/hotel-offers",method:"GET",requestParams:s,responseStatus:200,responseTimeMs:Date.now()-t}),r.NextResponse.json(u)}catch(e){return r.NextResponse.json({error:e.message,errors:e.errors},{status:e.status||500})}}async function i(e){let t=Date.now();try{let{searchParams:s}=new URL(e.url),n={keyword:s.get("keyword"),subType:(s.get("subType")||"HOTEL_LEISURE,HOTEL_GDS").split(",")};s.has("countryCode")&&(n.countryCode=s.get("countryCode")),s.has("lang")&&(n.lang=s.get("lang")),s.has("max")&&(n.max=parseInt(s.get("max")));let u=(0,o.G)(),i=await u.shopping.hotelOffers.autocomplete(n);return await (0,a.V)({endpoint:"/v1/reference-data/locations/hotels/autocomplete",method:"GET",requestParams:n,responseStatus:200,responseTimeMs:Date.now()-t}),r.NextResponse.json(i)}catch(e){return r.NextResponse.json({error:e.message,errors:e.errors},{status:e.status||500})}}async function p(e){let t=Date.now();try{let s=await e.json(),n=(0,o.G)(),u=await n.booking.hotelOrders.create(s);return await (0,a.V)({endpoint:"/v2/booking/hotel-orders",method:"POST",responseStatus:200,responseTimeMs:Date.now()-t}),r.NextResponse.json(u)}catch(e){return r.NextResponse.json({error:e.message,errors:e.errors},{status:e.status||500})}}},1242:(e,t,s)=>{s.d(t,{V:()=>o});var r=s(5662);async function o(e){try{let t=(0,r.lx)();await t.from("api_logs").insert({user_id:e.userId||null,endpoint:e.endpoint,method:e.method,request_params:e.requestParams||null,response_status:e.responseStatus,response_time_ms:e.responseTimeMs,error_message:e.errorMessage||null,ip_address:e.ipAddress||null,user_agent:e.userAgent||null})}catch(e){console.error("[API Logger] Failed to log request:",e)}}},5662:(e,t,s)=>{s.d(t,{lx:()=>o});var r=s(7857);function o(){let e=process.env.NEXT_PUBLIC_SUPABASE_URL,t=process.env.SUPABASE_SERVICE_ROLE_KEY;if(!e||!t)throw Error("Missing Supabase server env vars");return(0,r.eI)(e,t,{auth:{autoRefreshToken:!1,persistSession:!1}})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[276,972,857,149],()=>s(7333));module.exports=r})();