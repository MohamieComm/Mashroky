"use strict";(()=>{var e={};e.id=27,e.ids=[27],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},8183:(e,s,t)=>{t.r(s),t.d(s,{originalPathname:()=>m,patchFetch:()=>f,requestAsyncStorage:()=>c,routeModule:()=>l,serverHooks:()=>h,staticGenerationAsyncStorage:()=>d});var r={};t.r(r),t.d(r,{POST:()=>p,dynamic:()=>i});var o=t(9303),a=t(8716),n=t(3131),u=t(8275);let i="force-dynamic";async function p(e){return(0,u.Rv)(e)}let l=new o.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/hotels/offers/route",pathname:"/api/hotels/offers",filename:"route",bundlePath:"app/api/hotels/offers/route"},resolvedPagePath:"C:\\Users\\ishou\\Desktop\\MashroukGit\\Tmahshruk\\CleanMashroky\\amadeus-api\\app\\api\\hotels\\offers\\route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:c,staticGenerationAsyncStorage:d,serverHooks:h}=l,m="/api/hotels/offers/route";function f(){return(0,n.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:d})}},8275:(e,s,t)=>{t.d(s,{I3:()=>n,Io:()=>p,Rv:()=>u,eq:()=>i});var r=t(7070),o=t(6149),a=t(1242);async function n(e){let s=Date.now();try{let{searchParams:t}=new URL(e.url),n=Object.fromEntries(t.entries()),u=(0,o.G)(),i=await u.shopping.hotelOffers.byCity(n);return await (0,a.V)({endpoint:"/v1/reference-data/locations/hotels/by-city",method:"GET",requestParams:n,responseStatus:200,responseTimeMs:Date.now()-s}),r.NextResponse.json(i)}catch(e){return r.NextResponse.json({error:e.message,errors:e.errors},{status:e.status||500})}}async function u(e){let s=Date.now();try{let t=await e.json(),n=(0,o.G)(),u=await n.shopping.hotelOffers.search(t);return await (0,a.V)({endpoint:"/v3/shopping/hotel-offers",method:"GET",requestParams:t,responseStatus:200,responseTimeMs:Date.now()-s}),r.NextResponse.json(u)}catch(e){return r.NextResponse.json({error:e.message,errors:e.errors},{status:e.status||500})}}async function i(e){let s=Date.now();try{let{searchParams:t}=new URL(e.url),n={keyword:t.get("keyword"),subType:(t.get("subType")||"HOTEL_LEISURE,HOTEL_GDS").split(",")};t.has("countryCode")&&(n.countryCode=t.get("countryCode")),t.has("lang")&&(n.lang=t.get("lang")),t.has("max")&&(n.max=parseInt(t.get("max")));let u=(0,o.G)(),i=await u.shopping.hotelOffers.autocomplete(n);return await (0,a.V)({endpoint:"/v1/reference-data/locations/hotels/autocomplete",method:"GET",requestParams:n,responseStatus:200,responseTimeMs:Date.now()-s}),r.NextResponse.json(i)}catch(e){return r.NextResponse.json({error:e.message,errors:e.errors},{status:e.status||500})}}async function p(e){let s=Date.now();try{let t=await e.json(),n=(0,o.G)(),u=await n.booking.hotelOrders.create(t);return await (0,a.V)({endpoint:"/v2/booking/hotel-orders",method:"POST",responseStatus:200,responseTimeMs:Date.now()-s}),r.NextResponse.json(u)}catch(e){return r.NextResponse.json({error:e.message,errors:e.errors},{status:e.status||500})}}},1242:(e,s,t)=>{t.d(s,{V:()=>o});var r=t(5662);async function o(e){try{let s=(0,r.lx)();await s.from("api_logs").insert({user_id:e.userId||null,endpoint:e.endpoint,method:e.method,request_params:e.requestParams||null,response_status:e.responseStatus,response_time_ms:e.responseTimeMs,error_message:e.errorMessage||null,ip_address:e.ipAddress||null,user_agent:e.userAgent||null})}catch(e){console.error("[API Logger] Failed to log request:",e)}}},5662:(e,s,t)=>{t.d(s,{lx:()=>o});var r=t(7857);function o(){let e=process.env.NEXT_PUBLIC_SUPABASE_URL,s=process.env.SUPABASE_SERVICE_ROLE_KEY;if(!e||!s)throw Error("Missing Supabase server env vars");return(0,r.eI)(e,s,{auth:{autoRefreshToken:!1,persistSession:!1}})}}};var s=require("../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[276,972,857,149],()=>t(8183));module.exports=r})();