"use strict";(()=>{var e={};e.id=325,e.ids=[325],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},7637:(e,t,s)=>{s.r(t),s.d(t,{originalPathname:()=>m,patchFetch:()=>v,requestAsyncStorage:()=>c,routeModule:()=>d,serverHooks:()=>h,staticGenerationAsyncStorage:()=>l});var r={};s.r(r),s.d(r,{GET:()=>p,dynamic:()=>u});var a=s(9303),i=s(8716),o=s(3131),n=s(7843);let u="force-dynamic";async function p(e){return(0,n.Q3)(e)}let d=new a.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/activities/search/route",pathname:"/api/activities/search",filename:"route",bundlePath:"app/api/activities/search/route"},resolvedPagePath:"C:\\Users\\ishou\\Desktop\\MashroukGit\\Tmahshruk\\CleanMashroky\\amadeus-api\\app\\api\\activities\\search\\route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:c,staticGenerationAsyncStorage:l,serverHooks:h}=d,m="/api/activities/search/route";function v(){return(0,o.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:l})}},7843:(e,t,s)=>{s.d(t,{K3:()=>n,Q3:()=>o});var r=s(7070),a=s(6149),i=s(1242);async function o(e){let t=Date.now();try{let{searchParams:s}=new URL(e.url),o={latitude:parseFloat(s.get("latitude")),longitude:parseFloat(s.get("longitude")),radius:s.has("radius")?parseInt(s.get("radius")):void 0},n=(0,a.G)(),u=await n.shopping.activities.byGeocode(o);return await (0,i.V)({endpoint:"/v1/shopping/activities",method:"GET",requestParams:o,responseStatus:200,responseTimeMs:Date.now()-t}),r.NextResponse.json(u)}catch(e){return r.NextResponse.json({error:e.message,errors:e.errors},{status:e.status||500})}}async function n(e){let t=Date.now();try{let s=(0,a.G)(),o=await s.shopping.activities.get(e);return await (0,i.V)({endpoint:`/v1/shopping/activities/${e}`,method:"GET",responseStatus:200,responseTimeMs:Date.now()-t}),r.NextResponse.json(o)}catch(e){return r.NextResponse.json({error:e.message,errors:e.errors},{status:e.status||500})}}},1242:(e,t,s)=>{s.d(t,{V:()=>a});var r=s(5662);async function a(e){try{let t=(0,r.lx)();await t.from("api_logs").insert({user_id:e.userId||null,endpoint:e.endpoint,method:e.method,request_params:e.requestParams||null,response_status:e.responseStatus,response_time_ms:e.responseTimeMs,error_message:e.errorMessage||null,ip_address:e.ipAddress||null,user_agent:e.userAgent||null})}catch(e){console.error("[API Logger] Failed to log request:",e)}}},5662:(e,t,s)=>{s.d(t,{lx:()=>a});var r=s(7857);function a(){let e=process.env.NEXT_PUBLIC_SUPABASE_URL,t=process.env.SUPABASE_SERVICE_ROLE_KEY;if(!e||!t)throw Error("Missing Supabase server env vars");return(0,r.eI)(e,t,{auth:{autoRefreshToken:!1,persistSession:!1}})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[276,972,857,149],()=>s(7637));module.exports=r})();