<!doctype html>
<html lang="ar" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- TODO: Set the document title to the name of your application -->
    <title>مشروك للسفر والسياحة</title>
    <meta name="description" content="منصة مشروك للسفر والسياحة: حجوزات، عروض، ونصائح ذكية للموسم." />
    <meta name="author" content="Mashrouk Travel & Tourism" />

    <!-- TODO: Update og:title to match your application name -->
    <meta property="og:title" content="مشروك للسفر والسياحة" />
    <meta property="og:description" content="حجوزات شاملة للطيران والفنادق والأنشطة مع مساعد ذكي." />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="https://lovable.dev/opengraph-image-p98pqg.png" />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@MashroukTravel" />
    <meta name="twitter:image" content="https://lovable.dev/opengraph-image-p98pqg.png" />

    <script type="text/javascript">
      (function () {
        var apiBase = "%VITE_FLIGHT_API_URL%";
        if (!apiBase || apiBase.indexOf("%VITE_") === 0) {
          apiBase = "https://jubilant-hope-production-a334.up.railway.app";
        }
        var configUrl = apiBase.replace(/\/$/, "") + "/api/public-config";

        var fallbackCampaignCode = "0c80bdb8b4";
        function injectAdmitadScript(campaignCode) {
          var resolvedCode = campaignCode || fallbackCampaignCode;
          if (!resolvedCode) return;
          var script = document.createElement("script");
          script.async = true;
          script.src =
            "https://www.artfut.com/static/tagtag.min.js?campaign_code=" +
            encodeURIComponent(resolvedCode);
          script.onerror = function () {
            var self = this;
            window.ADMITAD = window.ADMITAD || {};
            ADMITAD.Helpers = ADMITAD.Helpers || {};
            ADMITAD.Helpers.generateDomains = function () {
              for (
                var e = new Date(),
                  n = Math.floor(
                    new Date(2020, e.getMonth(), e.getDate())
                      .setUTCHours(0, 0, 0, 0) /
                      1e3
                  ),
                  t = parseInt(1e12 * (Math.sin(n) + 1)).toString(30),
                  i = ["de"],
                  o = [],
                  a = 0;
                a < i.length;
                ++a
              )
                o.push({ domain: t + "." + i[a], name: t });
              return o;
            };
            ADMITAD.Helpers.findTodaysDomain = function (e) {
              function n() {
                var o = new XMLHttpRequest(),
                  a = i[t].domain,
                  D = "https://" + a + "/";
                o.open("HEAD", D, !0);
                o.onload = function () {
                  setTimeout(e, 0, i[t]);
                };
                o.onerror = function () {
                  ++t < i.length
                    ? setTimeout(n, 0)
                    : setTimeout(e, 0, void 0);
                };
                o.send();
              }
              var t = 0,
                i = ADMITAD.Helpers.generateDomains();
              n();
            };
            window.ADMITAD = window.ADMITAD || {};
            ADMITAD.Helpers.findTodaysDomain(function (e) {
              if (((window.ADMITAD.dynamic = e), window.ADMITAD.dynamic)) {
                var n = (function () {
                    return function () {
                      return self.src ? self : "";
                    };
                  })(),
                  t = n(),
                  i = (/campaign_code=([^&]+)/.exec(t.src) || [])[1] || "";
                t.parentNode.removeChild(t);
                var o = document.getElementsByTagName("head")[0],
                  a = document.createElement("script");
                a.src =
                  "https://www." +
                  window.ADMITAD.dynamic.domain +
                  "/static/" +
                  window.ADMITAD.dynamic.name.slice(1) +
                  window.ADMITAD.dynamic.name.slice(0, 1) +
                  ".min.js?campaign_code=" +
                  i;
                o.appendChild(a);
              }
            });
          };
          document.head.appendChild(script);
        }

        try {
          fetch(configUrl)
            .then(function (response) {
              return response.json();
            })
            .then(function (data) {
              injectAdmitadScript(data && data.admitad_campaign_code);
            })
            .catch(function () {
              injectAdmitadScript(fallbackCampaignCode);
            });
        } catch (e) {}
      })();
    </script>

    <script type="text/javascript">
      window.cookie_name = "deduplication_cookie";
      var cookie_name = window.cookie_name;
      var days_to_store = 90;
      var deduplication_cookie_value = "admitad";
      var channel_name = "utm_source";

      window.getSourceParamFromUri = function () {
        var pattern = channel_name + "=([^&]+)";
        var re = new RegExp(pattern);
        return (re.exec(document.location.search) || [])[1] || "";
      };

      window.getSourceCookie = function () {
        var matches = document.cookie.match(
          new RegExp(
            "(?:^|; )" +
              cookie_name.replace(/([\.$?*|{}\(\)\[\]\\/\+^])/g, "\\$1") +
              "=([^;]*)"
          )
        );
        return matches ? decodeURIComponent(matches[1]) : undefined;
      };

      window.setSourceCookie = function () {
        var param = window.getSourceParamFromUri();
        var params = new URL(document.location).searchParams;
        if (!params.get(channel_name) && params.get("gclid")) {
          param = "advAutoMarkup";
        } else if (!params.get(channel_name) && params.get("fbclid")) {
          param = "facebook";
        } else if (!param) {
          return;
        }
        var period = days_to_store * 60 * 60 * 24 * 1000;
        var expiresDate = new Date(period + +new Date());
        var cookieString =
          cookie_name + "=" + param + "; path=/; expires=" + expiresDate.toGMTString();
        document.cookie = cookieString;
        document.cookie = cookieString + "; domain=." + location.host;
      };

      window.setSourceCookie();
    </script>
  </head>

  <body>
    <div id="root"></div>
    <script type="module" src="/src/main/main.tsx"></script>
  </body>
</html>
